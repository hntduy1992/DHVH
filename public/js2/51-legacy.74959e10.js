"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[51],{80454:function(e,t,n){n.d(t,{k:function(){return i}});n(68309),n(21249);var r=function(e,t){return{id:"Node-".concat(t),displayName:e.name,children:0===(null===e||void 0===e?void 0:e.permissions.length)?[]:e.permissions.map((function(e){return{id:e.id,displayName:e.display_name}}))}},a=function(){return{id:null,name:null,permissions:[]}},i={fromJson:r,baseJson:a}},5788:function(e,t,n){n.d(t,{_:function(){return s}});n(68309);var r=function(e){return{id:e.id,name:e.name,guard_name:e.guard_name,permissions:e.permissions}},a=function(e){return{id:e.id,name:e.name,guard_name:e.guard_name,permissions:e.permissions,created_at:e.created_at}},i=function(){return{id:null,name:null,guard_name:"api",permissions:[]}},s={toJson:r,fromJson:a,baseJson:i}},57529:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("LayoutDefault",[n("validation-observer",{ref:"observer"},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("IBreadcrumb",{attrs:{items:e.breadcrumbs}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-toolbar",{attrs:{dense:"",elevation:"0"}},[n("v-toolbar-title",[e._v("THÔNG TIN")])],1),n("v-divider"),n("v-card-text",[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("VTextValidation",{attrs:{dense:"",outlined:"",label:"Tên phân quyền",rules:{required:!0}},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}})],1),n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-select",{attrs:{dense:"",outlined:"",label:"Guard",items:["api","web"]},model:{value:e.item.guard_name,callback:function(t){e.$set(e.item,"guard_name",t)},expression:"item.guard_name"}})],1)],1)],1)],1)],1),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-toolbar",{attrs:{dense:"",elevation:"0"}},[n("v-toolbar-title",[e._v("CHỨC NĂNG")]),n("v-spacer"),n("v-text-field",{staticClass:"mr-2",staticStyle:{"max-width":"210px"},attrs:{label:"Tìm kiếm","hide-details":"",clearable:"","clear-icon":"mdi-close-circle-outline"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-divider"),n("v-card-text",[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-treeview",{attrs:{selectable:"","return-object":"","selected-color":"error","item-text":"displayName","load-children":e.fnGetPermission,items:e.items,search:e.search,"open-all":!0},model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1)],1)],1),n("v-divider"),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{attrs:{elevation:"0",shaped:"",color:"warning"},on:{click:e.fnReset}},[n("v-icon",[e._v("mdi-reload")]),e._v(" Làm lại ")],1),n("v-btn",{attrs:{elevation:"0",shaped:"",color:"error"},on:{click:e.fnSubmit}},[n("v-icon",[e._v("mdi-content-save")]),e._v(" Lưu lại ")],1)],1)],1)],1)],1)],1)],1)},a=[],i=n(67906),s=n(16198),o=(n(21249),n(41539),n(12954)),c=n(45486),l=n(5788),u=n(80454),d=n(33578),m=n(42013),v={components:{LayoutDefault:d.Z,VTextValidation:c.Z,ValidationObserver:o._j,IBreadcrumb:m.Z},data:function(){return{breadcrumbs:[{text:"Dashboard",disabled:!1,href:"Dashboard"},{text:"Quản Lý Phân Quyền",disabled:!1,href:"/Auth/Roles"},{text:"Cập nhật thông tin",disabled:!1,href:""}],loading:!1,item:l._.baseJson(),items:[{id:"Root-1",displayName:"Toàn quyền",children:[]}],search:null,permissions:[]}},watch:{permissions:function(e){this.item.permissions=e.map((function(e){return e.id}))}},methods:{fnGetPermission:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("auth/roles/modules").then((function(t){e.items[0].children=t.data.data.map((function(e,t){return u.k.fromJson(e,t)}))})).catch((function(e){console.log("e = ",e)}));case 2:return t.next=4,e.fnGetDetail();case 4:case"end":return t.stop()}}),t)})))()},fnGetDetail:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("auth/roles/edit/"+e.$route.params.id).then((function(t){e.item=l._.fromJson(t.data.data),e.permissions=e.item.permissions})).catch();case 2:case"end":return t.stop()}}),t)})))()},fnSubmit:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$refs.observer.validate();case 3:if(n=t.sent,n){t.next=7;break}return e.loading=!1,t.abrupt("return",!1);case 7:e.axios.post("auth/roles/edit/"+e.$route.params.id,l._.toJson(e.item)).then((function(t){e.$store.dispatch("SnackbarStore/showSnackBar",t.data),e.fnReset()})).catch().finally((function(){e.loading=!1}));case 8:case"end":return t.stop()}}),t)})))()},fnReset:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fnGetDetail();case 2:case"end":return t.stop()}}),t)})))()}}},f=v,p=n(1001),h=n(43453),b=n.n(h),x=n(680),Z=n(32371),w=n(37118),_=n(82102),k=n(11418),V=n(96428),g=n(62877),y=n(43986),T=n(99762),C=n(55978),D=n(36656),S=n(27921),J=n(98080),N=(0,p.Z)(f,r,a,!1,null,null,null),G=N.exports;b()(N,{VBtn:x.Z,VCard:Z.Z,VCardActions:w.h7,VCardText:w.ZB,VCol:_.Z,VDivider:k.Z,VIcon:V.Z,VRow:g.Z,VSelect:y.Z,VSpacer:T.Z,VTextField:C.Z,VToolbar:D.Z,VToolbarTitle:S.qW,VTreeview:J.Z})}}]);
//# sourceMappingURL=51-legacy.74959e10.js.map