"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[321],{4497:function(t,e,i){i.d(e,{Z:function(){return g}});i(6699);var a=i(3242),n=i(5795),s=i(5907),o=i(3944),l=i(390),r=i(423),h=i(5703),u=i(5600),c=i(3325),d=i(1824),m=i(4589);const p=(0,c.Z)(s.Z,o.Z,l.Z,r.Z,h.Z,n.Z);var g=p.extend({name:"v-dialog",directives:{ClickOutside:u.Z},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,d.Jk)("full-width",this)},beforeMount(){this.$nextTick((()=>{this.isBooted=this.isActive,this.isActive&&this.show()}))},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick((()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout((()=>this.animate=!1),150)}))},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):l.Z.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((()=>{this.$nextTick((()=>{this.$refs.content.contains(document.activeElement)||(this.previousActiveElement=document.activeElement,this.$refs.content.focus()),this.bind()}))}))},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===m.Do.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick((()=>t&&t.focus()))}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((t=>t.contains(e)))){const t=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find((t=>!t.hasAttribute("disabled")));e&&e.focus()}},genContent(){return this.showLazyContent((()=>[this.$createElement(a.Z,{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog",tabindex:this.isActive?0:void 0,"aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])]))},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:(0,m.kb)(this.maxWidth),width:(0,m.kb)(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},7781:function(t,e,i){i.d(e,{Z:function(){return h}});i(6699);var a=i(5978),n=a.Z,s=i(5424),o=i(4589),l=i(1824),r=i(6290),h=n.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>(0,o.TI)(t).every((t=>null!=t&&"object"===typeof t))}},computed:{classes(){return{...n.options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce(((t,{size:e=0})=>t+e),0);return this.$vuetify.lang.t(this.counterSizeString,t,(0,o.XE)(e,1024===this.base))},internalArrayValue(){return(0,o.TI)(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((t=>{const{name:e="",size:i=0}=t,a=this.truncateText(e);return this.showSize?`${a} (${(0,o.XE)(i,1024===this.base)})`:a})):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&(0,l.N6)("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.multiple?t:t?[t]:[];(0,o.vZ)(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map(((t,e)=>this.$createElement(s.Z,{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t]))):[]},genControl(){const t=n.options.methods.genControl.call(this);return this.hideInput&&(t.data.style=(0,r.y0)(t.data.style,{display:"none"})),t},genInput(){const t=n.options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",(()=>{this.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach(((e,i)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[i],file:e,index:i}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=n.options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:()=>this.$refs.input.click()},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}…${t.slice(t.length-e)}`}}})},9823:function(t,e,i){i.r(e),i.d(e,{default:function(){return P}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("LayoutDefault",[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("IBreadcrumb",{attrs:{items:t.breadcrumbs}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-card",[i("v-card-subtitle",[t._v("LỌC BỘ TIÊU CHÍ ĐÁNH GIÁ")]),i("v-divider"),i("v-card-text",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"3"}},[i("v-select",{attrs:{dense:"",label:"Năm đánh giá","item-text":"name","item-value":"id",items:t.years},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1),i("v-col",{attrs:{cols:"12",sm:"9"}},[i("v-autocomplete",{attrs:{dense:"",label:"Bộ tiêu chí","item-text":"name","item-value":"id",items:t.categories},model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}})],1)],1)],1)],1)],1),i("v-col",{attrs:{cols:"12"}},[i("v-card",[i("v-card-text",[i("v-data-table",{attrs:{id:"survey",dense:"","item-key":"name","mobile-breakpoint":"0","disable-pagination":"","disable-sort":"","disable-filtering":"","hide-default-footer":"",headers:t.headers,items:t.iData,loading:t.loading},scopedSlots:t._u([{key:"body",fn:function(e){var a=e.items;return[i("tbody",[t._l(a,(function(e,a){return[e.danhDauCau<2?[i("CauHoi",{key:e+a,attrs:{question:e}})]:t._e(),e.danhDauCau>=2?[i("CauTraLoi",{key:e+a,attrs:{question:e}})]:t._e()]}))],2),i("tfoot",[0==a.length?i("tr",[i("td",{staticClass:"text-center",attrs:{colspan:"8"}},[i("p",{staticClass:"ma-0"},[t._v(" Không tìm thấy dữ liệu ")])])]):t._e(),i("tr",[i("td"),i("td",{staticClass:"text-right font-weight-bold"},[t._v(" Tổng cộng ")]),i("td",{staticClass:"text-center"},[i("span",{staticClass:"font-weight-bold red--text"},[t._v(t._s(t.total1))])]),i("td",{staticClass:"text-center"},[i("span",{staticClass:"font-weight-bold red--text"},[t._v(t._s(parseFloat(t.total).toFixed(2)))])]),i("td"),i("td")])])]}}])})],1),i("v-divider"),i("v-card-actions",[i("v-row",{attrs:{dense:"","no-gutters":""}},[i("v-col",{attrs:{cols:"12",sm:"12"}},[i("span",{staticClass:"red--text"},[t._v("*")]),t._v(" File xác nhận điểm tự đánh giá của thủ trưởng đơn vị (có đóng dấu ký tên) ")]),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-file-input",{staticStyle:{"min-height":"auto","max-width":"300px"},attrs:{dense:"","hide-details":"","prepend-icon":"","prepend-inner-icon":"mdi-upload",placeholder:"File xác nhận điểm tự đánh giá",height:"20",clearable:"",disabled:t.disableSubmit},on:{change:t.upload,"click:clear":t.clearFile}})],1)],1),i("v-spacer"),i("v-btn",{attrs:{color:"error",loading:t.isSubmitting,disabled:t.disableSubmit},on:{click:function(e){return e.stopPropagation(),t.fnSubmit.apply(null,arguments)}}},[t._v(" Gửi điểm ")])],1)],1),i("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{staticClass:"text-h5 red white--text"},[t._v(" HỆ THỐNG ")]),i("v-card-text",{staticClass:"pa-0"},[i("div",{staticClass:"pa-3 font-weight-bold"},[t._v("Bạn chưa đính kèm file xác nhận điểm tự đánh giá.")])]),i("v-divider"),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Đồng ý ")])],1)],1)],1)],1)],1)],1)},n=[],s=i(629),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",{staticClass:"font-weight-bold text-center"},[t._v(" "+t._s(t.question.stt)+" ")]),i("td",[t._v(" "+t._s(t.question.tenCauHoi)+" ")]),i("td",{staticClass:"text-center"},[i("span",{class:{"font-weight-bold":!0,"red--text":0===t.question.level}},[t._v(t._s(parseFloat(t.question.diemLonNhat).toFixed(2)))])]),i("td",{staticClass:"text-center"},[i("span",{class:{"font-weight-bold":0==t.question.level,"red--text":0===t.question.level}},[t._v(t._s(parseFloat(t.diemTuDanhGia).toFixed(2)))])]),i("td",{attrs:{rowspan:1==t.question.danhDauCau&&t.question.childrenCount>0&&t.question.childrenCount+1}},[1==t.question.danhDauCau?[null!=t.fileName?i("div",{staticClass:"text-center"},[i("v-tooltip",{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"ma-2 white--text",attrs:{color:"blue-grey",elevation:"0",small:"",link:"",target:"_blank",href:t.download()}},"v-btn",n,!1),a),[i("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-cloud-download ")]),i("span",{staticClass:"ml-2"},[t._v("Tải về")])],1)]}}],null,!1,2256436589)},[i("span",[t._v(t._s(t.fileName.split("/").pop()))])])],1):t._e()]:t._e()],2),i("td",{staticClass:"text-center",attrs:{rowspan:1==t.question.danhDauCau&&t.question.childrenCount>0&&t.question.childrenCount+1}},[1==t.question.danhDauCau&&null!=t.ghiChuDanhGia?i("div",[i("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",disabled:""},model:{value:t.ghiChuDanhGia,callback:function(e){t.ghiChuDanhGia=e},expression:"ghiChuDanhGia"}})],1):t._e()])])},l=[],r={props:{question:{type:Object,default:null}},data(){return{dialog:!1,loading:!1,score:0,fileName:null,ghiChuDanhGia:null}},computed:{...(0,s.Se)("khaoSatStore",["bangDiem","cauHoi"]),diemTuDanhGia(){return this.cauHoi.find((t=>t.maCauHoi===this.question.id))?.diem??0}},watch:{bangDiem(){if(1===this.question.danhDauCau){const t=this.bangDiem.find((t=>t.maCauHoi===this.question.id));this.fileName=t.fileDanhGia,this.ghiChuDanhGia=t.ghiChuDanhGia}}},methods:{download(){return"https://cscchcsadec.dongthap.gov.vn/storage/"+this.fileName}}},h=r,u=i(1001),c=i(3453),d=i.n(c),m=i(680),p=i(6428),g=i(4350),v=i(9330),f=(0,u.Z)(h,o,l,!1,null,"5a2c5b09",null),b=f.exports;d()(f,{VBtn:m.Z,VIcon:p.Z,VTextarea:g.Z,VTooltip:v.Z});var C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",{staticClass:"font-weight-bold text-center"},[t._v(" "+t._s(t.question.stt)+" ")]),i("td",[t._v(" "+t._s(t.question.tenCauHoi)+" ")]),i("td",{staticClass:"text-center font-italic"},[t._v(" "+t._s(t.question.diemLonNhat)+" ")]),i("td",[1===t.question.loaiCauHoi||3===t.question.danhDauCau&&1===t.question.loaiCauHoi?["Text"===t.question.kieuNhapLieu?i("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Nhập điểm",disabled:""},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):"Select"===t.question.kieuNhapLieu?i("v-select",{staticStyle:{width:"70px","min-width":"0",margin:"0 auto"},attrs:{dense:"","hide-details":"",placeholder:"Chọn","item-text":"name","item-value":"id","return-object":!1,items:t.points,disabled:""},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):"Checkbox"===t.question.kieuNhapLieu?i("v-checkbox",{staticClass:"align-center justify-center pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",color:"red",value:t.question.diemLonNhat,"true-value":t.question.diemLonNhat,"input-value":t.question.diemLonNhat,disabled:""},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):i("v-radio-group",{staticClass:"pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",disabled:""},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}},[i("v-radio",{attrs:{color:"red",value:t.question.diemLonNhat}})],1)]:t._e()],2),3===t.question.danhDauCau&&1===t.question.loaiCauHoi?[i("td",[null!=t.fileName?i("div",{staticClass:"text-center"},[i("v-tooltip",{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"ma-2 white--text",attrs:{color:"blue-grey",elevation:"0",small:"",link:"",target:"_blank",href:t.download()}},"v-btn",n,!1),a),[i("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-cloud-download ")]),i("span",{staticClass:"ml-2"},[t._v("Tải về")])],1)]}}],null,!1,2256436589)},[i("span",[t._v(t._s(t.fileName.split("/").pop()))])])],1):t._e()]),i("td",{staticClass:"text-center font-weight-bold"},[null!=t.ghiChuDanhGia?i("div",[i("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",disabled:""},model:{value:t.ghiChuDanhGia,callback:function(e){t.ghiChuDanhGia=e},expression:"ghiChuDanhGia"}})],1):t._e()])]:t._e(),2===t.question.loaiCauHoi?[i("td"),i("td",{staticClass:"text-center font-weight-bold"},[t._v(" ĐTXHH ")])]:t._e()],2)},y=[],x={props:{question:{type:Object,default:null}},data(){return{dialog:!1,loading:!1,formInput:null,minQuestion:{},ghiChuDanhGia:null,fileName:null}},computed:{...(0,s.Se)("khaoSatStore",["bangDiem","cauHoi","eventChange"]),points(){const t=[];let e=JSON.parse(JSON.stringify(this.question.diemNhoNhat));while(Number(e.toFixed(2))<=this.question.diemLonNhat)t.push({id:Number(e.toFixed(2)),name:e.toFixed(2)}),e+=this.question.buocNhay;return t}},watch:{bangDiem(){if(1===this.question.loaiCauHoi&&2===this.question.danhDauCau){const t=this.bangDiem.find((t=>t.maCauHoi===this.question.parentId));this.ghiChuDanhGia=t?.ghiChuDanhGia,this.fnSetValueForm(t)}if(1===this.question.loaiCauHoi&&3===this.question.danhDauCau){const t=this.bangDiem.find((t=>t.maCauHoi===this.question.id));this.fnSetValueForm(t),this.fileName=t?.fileDanhGia,this.ghiChuDanhGia=t?.ghiChuDanhGia}}},methods:{download(){return"https://cscchcsadec.dongthap.gov.vn/storage/"+this.fileName},fnSetValueForm(t){const e=t?.noiDungTraLoi.find((t=>t.id===this.question.id));e&&(this.formInput=e.diem,this.$store.dispatch("khaoSatStore/capNhatDiemCapTren",t))}}},S=x,D=i(3702),w=i(8978),k=i(4739),_=i(3986),I=i(5978),$=(0,u.Z)(S,C,y,!1,null,"63a3ac23",null),T=$.exports;d()($,{VBtn:m.Z,VCheckbox:D.Z,VIcon:p.Z,VRadio:w.Z,VRadioGroup:k.Z,VSelect:_.Z,VTextField:I.Z,VTextarea:g.Z,VTooltip:v.Z});var N=i(5806),V=i(73),Z=i(3578),q=i(2013),A={metaInfo:{title:"Gửi điểm",titleTemplate:"%s - ĐÁNH GIÁ CHỈ SỐ CẢI CÁCH HÀNH CHÍNH SA ĐÉC",htmlAttrs:{lang:"vi",amp:!0}},components:{LayoutDefault:Z.Z,IBreadcrumb:q.Z,CauTraLoi:T,CauHoi:b},data(){return{breadcrumbs:[{text:"DASHBOARD",disabled:!1,href:"Dashboard"},{text:"TỰ ĐÁNH GIÁ",disabled:!1,href:"/Auth/KhaoSat/TuDanhGia/ChamDiem"}],dialog:!1,category:{},iData:[],loading:!1,questions:[],year:(new Date).getFullYear(),categoryId:0,categories:[],isSubmitting:!1,disableSubmit:!0,total:0,total1:0,headers:[{text:"STT",value:"stt",width:20,align:"center"},{text:"Tiêu chí",value:"name",width:260},{text:"Điểm tối đa",value:"maxScore",width:55,align:"center"},{text:"Tự đánh giá",value:"year",width:75,align:"center"},{text:"Đính kèm",value:"year",width:80,align:"center"},{text:"Ghi chú",value:"year",width:80,align:"center"}]}},computed:{...(0,s.rn)("khaoSatStore",["bangDiem"]),years(){const t=[],e=(new Date).getFullYear()+2;for(let i=2022;i<e;i++)t.push({id:i,name:`Năm ${i}`});return t.reverse()}},watch:{year(){this.categoryId=0,this.categories=[],this.data=[],this.fnGetDanhMuc()},categoryId(){this.data=[],this.fnGetCauHoi()},bangDiem(t){let e=0;t.forEach((t=>{e+=t.diem})),this.total=e}},created(){this.fnGetDanhMuc()},methods:{async fnGetDanhMuc(){await this.$axios.get("auth/khao-sat/tu-danh-gia/danh-muc",{params:{namApDung:this.year}}).then((t=>{this.categories=t.data?.data.map((t=>({id:t.id,name:t.tenDanhMuc}))),this.categoryId=this.categories[0]?.id})).catch(),await this.fnGetAvailable()},fnGetCauHoi(){this.loading=!0,this.$axios.get("auth/khao-sat/tu-danh-gia/cau-hoi",{params:{maDanhMuc:this.categoryId,namApDung:this.year}}).then((t=>{this.iData=t.data.data.map((t=>V.x.fromJson(t)));const e=[],i=[];this.iData.forEach((t=>{const a=0===t.parentId?t.diemLonNhat:0;this.total1=this.total1+a,1!==t.danhDauCau&&3!==t.danhDauCau||(t.bangdiem||(t.bangdiem=N.Q.baseJson(),t.bangdiem.maCauHoi=t.id,t.bangdiem.maDanhMuc=this.categoryId,t.bangdiem.parentId=t.parentId),e.push(N.Q.fromJson(t.bangdiem))),i.push({maCauHoi:t.id,parentId:t.parentId,loaiCauHoi:t.loaiCauHoi,loaiDieuKien:t.loaiDieuKien,diem:0,diemThamDinh:0})})),setTimeout((()=>{this.$store.commit("khaoSatStore/bangDiem",e),this.$store.commit("khaoSatStore/cauHoi",i)}),1)})).catch().finally((()=>{this.loading=!1}))},async fnGetAvailable(){await this.$axios.post("auth/khao-sat/tu-danh-gia/kiem-tra-hop-le",{maDanhMuc:this.categoryId}).then((t=>{this.disableSubmit=!t.data.data,this.$store.commit("khaoSatStore/kiemTraTuDanhGia",this.disableSubmit)})).catch()},fnSubmit(){null!=this.fileName?(this.isSubmitting=!0,this.$axios.post("auth/khao-sat/tu-danh-gia/gui-diem",{maDanhMuc:this.categoryId,fileName:this.fileName}).then((t=>{this.$store.dispatch("SnackbarStore/showSnackBar",t.data)})).catch().finally((()=>{this.isSubmitting=!1,this.fnGetAvailable()}))):this.dialog=!0},async upload(t){if(this.loading=!0,!t)return this.loading=!1,null;const e=new FormData;e.append("file",t),await this.$axios.post("auth/file-manager/singleUpload",e,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{t.data.success&&(this.fileName=t.data.fileUrl)})).catch().finally((()=>{this.loading=!1}))},clearFile(){this.fileName=null}}},H=A,G=i(1835),B=i(2371),F=i(7118),L=i(2102),E=i(6957),z=i(4497),O=i(1418),M=i(7781),K=i(2877),J=i(9762),j=(0,u.Z)(H,a,n,!1,null,null,null),P=j.exports;d()(j,{VAutocomplete:G.Z,VBtn:m.Z,VCard:B.Z,VCardActions:F.h7,VCardSubtitle:F.Qq,VCardText:F.ZB,VCardTitle:F.EB,VCol:L.Z,VDataTable:E.Z,VDialog:z.Z,VDivider:O.Z,VFileInput:M.Z,VRow:K.Z,VSelect:_.Z,VSpacer:J.Z})}}]);
//# sourceMappingURL=321.b93101b9.js.map