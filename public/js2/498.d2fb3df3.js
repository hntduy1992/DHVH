"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[498],{2013:function(t,e,a){a.d(e,{Z:function(){return C}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{staticClass:"m-toolbar",attrs:{elevation:"1",dense:""}},[a("ul",{staticClass:"breadcrumb hidden-xs-only"},t._l(t.items,(function(e){return a("li",{key:e.text},[a("router-link",{attrs:{to:e.href}},[t._v(t._s(e.text))])],1)})),0),a("v-breadcrumbs",{staticClass:"hidden-sm-and-up",attrs:{items:t.items},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item;return[a("v-breadcrumbs-item",{attrs:{href:i.href,disabled:i.disabled}},[t._v(" "+t._s(i.text.toUpperCase())+" ")])]}}])})],1)},n=[],s={props:["items"]},o=s,h=a(1001),r=a(3453),u=a.n(r),d=a(8320),l=a(6505),c=a(3325),m=(0,c.Z)(l.Z).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes(){return{"v-breadcrumbs__item":!0,[this.activeClass]:this.disabled}}},render(t){const{tag:e,data:a}=this.generateRouteLink();return t("li",[t(e,{...a,attrs:{...a.attrs,"aria-current":this.isActive&&this.isLink?"page":void 0}},this.$slots.default)])}}),p=a(4589),g=(0,p.Ji)("v-breadcrumbs__divider","li"),f=a(8085),v=(0,c.Z)(f.Z).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:()=>[]},large:Boolean},computed:{classes(){return{"v-breadcrumbs--large":this.large,...this.themeClasses}}},methods:{genDivider(){return this.$createElement(g,this.$slots.divider?this.$slots.divider:this.divider)},genItems(){const t=[],e=!!this.$scopedSlots.item,a=[];for(let i=0;i<this.items.length;i++){const n=this.items[i];a.push(n.text),e?t.push(this.$scopedSlots.item({item:n})):t.push(this.$createElement(m,{key:a.join("."),props:n},[n.text])),i<this.items.length-1&&t.push(this.genDivider())}return t}},render(t){const e=this.$slots.default||this.genItems();return t("ul",{staticClass:"v-breadcrumbs",class:this.classes},e)}}),b=(0,h.Z)(o,i,n,!1,null,"efea5b80",null),C=b.exports;u()(b,{VAppBar:d.Z,VBreadcrumbs:v,VBreadcrumbsItem:m})},7311:function(t,e,a){a.r(e),a.d(e,{default:function(){return R}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("LayoutDefault",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("IBreadcrumb",{attrs:{items:t.breadcrumbs}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-subtitle",[t._v("LỌC BỘ TIÊU CHÍ ĐÁNH GIÁ")]),a("v-divider"),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-select",{attrs:{dense:"",label:"Năm đánh giá","item-text":"name","item-value":"id",items:t.years,disabled:""},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1),a("v-col",{attrs:{cols:"12",sm:"9"}},[a("v-autocomplete",{attrs:{dense:"",label:"Bộ tiêu chí","item-text":"name","item-value":"id",items:t.categories,disabled:""},model:{value:t.tempCatId,callback:function(e){t.tempCatId=e},expression:"tempCatId"}})],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-text",[a("table",{staticClass:"table",attrs:{id:"xacnhan"}},[a("thead",[a("tr",[a("th",[t._v("STT")]),a("th",[t._v("Tiêu chí")]),a("th",[t._v("Điểm lớn nhất")]),a("th",[t._v("Tự đánh giá")]),a("th",[t._v("Đính kèm")]),a("th",[t._v("Ghi chú tự đánh giá")]),a("th",[t._v("Thẩm định")]),a("th",[t._v("Ghi chú thẩm định")])])]),a("tbody",[t._l(t.iData,(function(e,i){return[e.danhDauCau<2?[a("CauHoi",{key:e+i,attrs:{question:e}})]:t._e(),e.danhDauCau>=2?[a("CauTraLoi",{key:e+i,attrs:{question:e}})]:t._e()]}))],2),a("tfoot",[0===t.iData.length?a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"8"}},[a("p",{staticClass:"ma-0"},[t._v(" Không tìm thấy dữ liệu ")])])]):t._e(),a("tr",[a("td"),a("td",{staticClass:"text-right font-weight-bold"},[t._v(" Tổng cộng ")]),a("td",{staticClass:"text-center"},[a("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.total1))])]),a("td",{staticClass:"text-center"},[a("span",{staticClass:"font-weight-bold"},[t._v(t._s(parseFloat(t.total).toFixed(2)))])]),a("td"),a("td"),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("span",{staticClass:"font-weight-bold red--text"},[t._v(t._s(parseFloat(t.total2).toFixed(2)))])])])])])]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"blue",dark:"",small:""},on:{click:t.fnExportToWord}},[a("v-icon",[t._v("mdi-file-export")]),t._v(" Xuất file ")],1),a("v-spacer"),4==t.tinhTrangHienTai?a("v-btn",{attrs:{color:"primary",loading:t.isSubmitting,disabled:t.disableSubmit},on:{click:function(e){return e.stopPropagation(),t.fnKetThuc.apply(null,arguments)}}},[t._v(" Kết thúc ")]):t._e(),a("v-btn",{attrs:{color:"error",loading:t.isSubmitting,disabled:t.disableSubmit||6==t.tinhTrangHienTai},on:{click:function(e){return e.stopPropagation(),t.fnSubmit.apply(null,arguments)}}},[t._v(" Lưu lại ")])],1)],1)],1)],1)],1)},n=[],s=a(629),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"font-weight-bold text-center"},[t._v(" "+t._s(t.question.stt)+" ")]),a("td",[t._v(" "+t._s(t.question.tenCauHoi)+" ")]),a("td",{staticClass:"text-center"},[a("span",{class:{"font-weight-bold":!0,"red--text":0===t.question.level}},[t._v(t._s(parseFloat(t.question.diemLonNhat).toFixed(2)))])]),a("td",{staticClass:"text-center"},[a("span",{class:{"font-weight-bold":0==t.question.level,"red--text":0===t.question.level}},[t._v(t._s(parseFloat(t.diemTuDanhGia).toFixed(2)))])]),a("td",{attrs:{rowspan:1==t.question.danhDauCau&&t.question.childrenCount>0&&t.question.childrenCount+1}},[1==t.question.danhDauCau?[null!=t.fileName?a("div",{staticClass:"text-center"},[a("v-tooltip",{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"ma-2 white--text",attrs:{color:"blue-grey",elevation:"0",small:"",link:"",target:"_blank",href:t.download()}},"v-btn",n,!1),i),[a("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-cloud-download ")]),a("span",{staticClass:"ml-2"},[t._v("Tải về")])],1)]}}],null,!1,2256436589)},[a("span",[t._v(t._s(t.fileName.split("/").pop()))])])],1):t._e()]:t._e()],2),a("td",{staticClass:"text-center",attrs:{rowspan:1==t.question.danhDauCau&&t.question.childrenCount>0&&t.question.childrenCount+1}},[1==t.question.danhDauCau&&null!=t.ghiChuDanhGia?a("div",{staticStyle:{width:"150px"}},[a("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",rows:"2",readonly:!0},model:{value:t.ghiChuDanhGia,callback:function(e){t.ghiChuDanhGia=e},expression:"ghiChuDanhGia"}})],1):t._e()]),a("td",{staticClass:"text-center"},[a("span",{class:{"font-weight-bold":0==t.question.level,"red--text":0==t.question.level}},[t._v(t._s(parseFloat(t.diemThamDinh).toFixed(2)))])]),a("td",{staticClass:"text-center",attrs:{rowspan:1==t.question.danhDauCau&&t.question.childrenCount>0&&t.question.childrenCount+1}},[1===t.question.danhDauCau?[t.question.hasChild?t._e():a("div",{staticStyle:{width:"150px"}},[t.ghiChuThamDinh?a("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",rows:"2",readonly:!0},model:{value:t.ghiChuThamDinh,callback:function(e){t.ghiChuThamDinh=e},expression:"ghiChuThamDinh"}}):a("span",[t._v("Thống nhất")])],1)]:t._e()],2)])},h=[],r={props:{question:{type:Object,default:null}},data(){return{dialog:!1,dialog2:!1,loading:!1,score:0,fileName:null,ghiChuDanhGia:null,ghiChuThamDinh:null,dontHavePermission:!1,iReact:!0}},computed:{...(0,s.Se)("khaoSatStore",["bangDiem","cauHoi"]),...(0,s.rn)("khaoSatStore",["disableThamDinh","permissions"]),...(0,s.rn)("authStore",["auth"]),diemTuDanhGia(){return this.cauHoi.find((t=>t.maCauHoi===this.question.id))?.diem},diemThamDinh(){return this.cauHoi.find((t=>t.maCauHoi===this.question.id))?.diemThamDinh}},watch:{bangDiem(){if(1===this.question.danhDauCau){const t=this.bangDiem.find((t=>t.maCauHoi===this.question.id));this.fileName=t.fileDanhGia,this.ghiChuDanhGia=t.ghiChuDanhGia,this.ghiChuThamDinh=t.ghiChuThamDinh}}},methods:{download(){return"https://cscchcsadec.dongthap.gov.vn/storage/"+this.fileName},capNhatBangDiem(){this.dialog2=!1;const t=JSON.parse(JSON.stringify(this.bangDiem)),e=t.findIndex((t=>t.maCauHoi===this.question.id));t[e].ghiChuThamDinh=this.ghiChuThamDinh,this.$store.commit("khaoSatStore/capNhatBangDiem",{index:e,value:t[e]})}}},u=r,d=a(1001),l=a(3453),c=a.n(l),m=a(680),p=a(6428),g=a(4350),f=a(9330),v=(0,d.Z)(u,o,h,!1,null,null,null),b=v.exports;c()(v,{VBtn:m.Z,VIcon:p.Z,VTextarea:g.Z,VTooltip:f.Z});var C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[2===t.question.danhDauCau?[a("td",{staticClass:"text-center"},[t._v(" "+t._s(t.question.stt)+" ")]),a("td",[t._v(" "+t._s(t.question.tenCauHoi)+" ")]),a("td"),a("td",{staticClass:"text-center"},[1===t.question.loaiCauHoi?["Text"===t.question.kieuNhapLieu?a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Nhập điểm",disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):"Select"===t.question.kieuNhapLieu?a("v-select",{staticStyle:{width:"70px","min-width":"0",margin:"0 auto"},attrs:{dense:"","hide-details":"",placeholder:"Chọn","item-text":"name","item-value":"id","return-object":!1,items:t.points,disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):"Checkbox"===t.question.kieuNhapLieu?a("v-checkbox",{staticClass:"align-center justify-center pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",color:"red",value:t.question.diemLonNhat,"true-value":t.question.diemLonNhat,"input-value":t.question.diemLonNhat,disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):a("v-radio-group",{staticClass:"pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}},[a("v-radio",{attrs:{color:"red",value:t.question.diemLonNhat}})],1)]:t._e()],2),a("td",[["Text"===t.question.kieuNhapLieu?a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Nhập điểm",disabled:t.dontHavePermission},on:{change:t.fnChangePoint},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):"Select"===t.question.kieuNhapLieu?a("v-select",{staticStyle:{width:"70px","min-width":"0",margin:"0 auto"},attrs:{dense:"","hide-details":"",placeholder:"Chọn","item-text":"name","item-value":"id","return-object":!1,items:t.points,disabled:t.dontHavePermission},on:{change:t.fnChangePoint},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):"Checkbox"===t.question.kieuNhapLieu?a("v-checkbox",{staticClass:"align-center justify-center pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",color:"red",value:t.question.diemLonNhat,"true-value":t.question.diemLonNhat,"input-value":t.question.diemLonNhat,disabled:t.dontHavePermission},on:{change:t.fnChangePoint},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):a("v-radio-group",{staticClass:"pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",disabled:t.dontHavePermission},on:{change:t.fnChangePoint},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}},[a("v-radio",{attrs:{color:"red",value:t.question.diemLonNhat}})],1)]],2)]:[a("td",{staticClass:"text-center"},[t._v(" "+t._s(t.question.stt)+" ")]),a("td",[t._v(" "+t._s(t.question.tenCauHoi)+" ")]),a("td"),a("td",{staticClass:"text-center"},[1===t.question.loaiCauHoi&&3===t.question.danhDauCau?["Text"===t.question.kieuNhapLieu?a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Nhập điểm",disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):"Select"===t.question.kieuNhapLieu?a("v-select",{staticStyle:{width:"70px","min-width":"0",margin:"0 auto"},attrs:{dense:"","hide-details":"",placeholder:"Chọn","item-text":"name","item-value":"id","return-object":!1,items:t.points,disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):"Checkbox"===t.question.kieuNhapLieu?a("v-checkbox",{staticClass:"align-center justify-center pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",color:"red",value:t.question.diemLonNhat,"true-value":t.question.diemLonNhat,"input-value":t.question.diemLonNhat,disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):a("v-radio-group",{staticClass:"pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}},[a("v-radio",{attrs:{color:"red",value:t.question.diemLonNhat}})],1)]:[a("span",{staticClass:"font-weight-bold"},[t._v("ĐTXHH")])]],2),a("td"),a("td"),a("td",[["Text"===t.question.kieuNhapLieu?a("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Nhập điểm",disabled:t.dontHavePermission},on:{change:t.fnChangePoint},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):"Select"===t.question.kieuNhapLieu?a("v-select",{staticStyle:{width:"70px","min-width":"0",margin:"0 auto"},attrs:{dense:"","hide-details":"",placeholder:"Chọn","item-text":"name","item-value":"id","return-object":!1,items:t.points,disabled:t.dontHavePermission},on:{change:t.fnChangePoint},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):"Checkbox"===t.question.kieuNhapLieu?a("v-checkbox",{staticClass:"align-center justify-center pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",color:"red",value:t.question.diemLonNhat,"true-value":t.question.diemLonNhat,"input-value":t.question.diemLonNhat,disabled:t.dontHavePermission},on:{change:t.fnChangePoint},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):a("v-radio-group",{staticClass:"pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",disabled:t.dontHavePermission},on:{change:t.fnChangePoint},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}},[a("v-radio",{attrs:{color:"red",value:t.question.diemLonNhat}})],1)]],2),a("td",{staticClass:"text-center"},[3===t.question.danhDauCau&&null!=t.ghiChuThamDinh?[t.question.hasChild?t._e():a("div",{staticStyle:{width:"150px"}},[a("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",rows:"2",readonly:!0},model:{value:t.ghiChuThamDinh,callback:function(e){t.ghiChuThamDinh=e},expression:"ghiChuThamDinh"}})],1)]:t._e()],2)]],2)},D=[],x={props:{question:{type:Object,default:null}},data(){return{dialog:!1,dialog2:!1,loading:!1,formInput:null,formThamDinh:null,minQuestion:{},ghiChuThamDinh:null,iReact:!0,iReact2:!0}},computed:{...(0,s.Se)("khaoSatStore",["bangDiem","cauHoi","eventChange"]),...(0,s.Se)("authStore",["auth"]),...(0,s.rn)("khaoSatStore",["disableThamDinh","permissions"]),points(){const t=[];let e=JSON.parse(JSON.stringify(this.question.diemNhoNhat));while(Number(e.toFixed(2))<=this.question.diemLonNhat)t.push({id:Number(e.toFixed(2)),name:e.toFixed(2)}),e+=this.question.buocNhay;return t},parent(){return this.cauHoi.find((t=>t.maCauHoi===this.question.parentId))||{}},dontHavePermission(){return this.disableThamDinh}},watch:{eventChange(){0!==Object.keys(this.eventChange).length&&this.eventChange.maCauHoi===this.question.parentId&&this.eventChange.maCauTraLoi!==this.question.id&&(this.formThamDinh="")},bangDiem(){if(!this.iReact)return null;if(1===this.question.loaiCauHoi&&2===this.question.danhDauCau){const t=this.bangDiem.find((t=>t.maCauHoi===this.question.parentId));this.fnSetValueForm(t)}if((1===this.question.loaiCauHoi||2===this.question.loaiCauHoi)&&3===this.question.danhDauCau){const t=this.bangDiem.find((t=>t.maCauHoi===this.question.id));this.fnSetValueForm(t),this.fileName=t.fileDanhGia,this.ghiChuDanhGia=t.ghiChuDanhGia}}},methods:{fnChangePoint(t){t=t?Number(t):0;const e=JSON.parse(JSON.stringify(this.bangDiem));let a={};if(a=3===this.question.danhDauCau?e.find((t=>t.maCauHoi===this.question.id)):e.find((t=>t.maCauHoi===this.question.parentId)),"OR"===this.parent.loaiDieuKien)a.diemThamDinh=t,a.noiDungThamDinh=[{id:this.question.id,diem:t}];else{const e=a.noiDungThamDinh.findIndex((t=>t.id===this.question.id));-1===e?a.noiDungThamDinh.push({id:this.question.id,diem:t}):a.noiDungThamDinh[e].diem=t;let i=0;a.noiDungThamDinh.forEach((t=>{i+=t.diem})),a.diemThamDinh=i}const i=this.bangDiem.findIndex((t=>t.maCauHoi===a.maCauHoi));this.$store.dispatch("khaoSatStore/capNhatBangDiem",{index:i,value:a}),"OR"===this.parent.loaiDieuKien&&this.$store.commit("khaoSatStore/eventChange",{maCauHoi:a.maCauHoi,maCauTraLoi:a.noiDungThamDinh[0]?.id})},capNhatBangDiem(){this.dialog2=!1;const t=JSON.parse(JSON.stringify(this.bangDiem)),e=t.findIndex((t=>t.maCauHoi===this.question.id));t[e].ghiChuThamDinh=this.ghiChuThamDinh,this.$store.commit("khaoSatStore/capNhatBangDiem",{index:e,value:t[e]})},fnSetValueForm(t){this.iReact=!1;const e=t?.noiDungTraLoi.find((t=>t.id===this.question.id));e&&(this.formInput=e.diem);const a=t?.noiDungThamDinh.find((t=>t.id===this.question.id));a&&(this.formThamDinh=a.diem),this.$store.dispatch("khaoSatStore/capNhatDiemCapTren",t)}}},T=x,S=a(3702),q=a(8978),k=a(4739),y=a(3986),_=a(5978),I=(0,d.Z)(T,C,D,!1,null,null,null),N=I.exports;c()(I,{VCheckbox:S.Z,VRadio:q.Z,VRadioGroup:k.Z,VSelect:y.Z,VTextField:_.Z,VTextarea:g.Z});var H=a(5806),w=a(73),L=a(3578),$=a(2013),V={components:{LayoutDefault:L.Z,IBreadcrumb:$.Z,CauTraLoi:N,CauHoi:b},data(){return{breadcrumbs:[{text:"DASHBOARD",disabled:!1,href:"Dashboard"},{text:"Xác Nhận",disabled:!1,href:"/Auth/KhaoSat/XacNhan/GuiDiem"}],category:{},iData:[],loading:!1,questions:[],year:(new Date).getFullYear(),categoryId:0,categories:[],isSubmitting:!1,disableSubmit:!0,total:0,total1:0,total2:0,tinhTrangHienTai:0,tempCatId:0}},computed:{...(0,s.rn)("khaoSatStore",["bangDiem","cauHoi"]),years(){const t=[],e=(new Date).getFullYear()+2;for(let a=2022;a<e;a++)t.push({id:a,name:`Năm ${a}`});return t.reverse()}},watch:{year(){this.categoryId=0,this.categories=[],this.data=[],this.fnGetDanhMuc()},categoryId(){this.data=[],this.fnGetCauHoi()},bangDiem(t){let e=0,a=0;t.forEach((t=>{e+=t.diem,a+=t.diemThamDinh,this.tinhTrangHienTai=t.trangThai})),this.total=e,this.total2=a}},created(){this.categoryId=this.$route.query.categoryId,this.fnGetDanhMuc()},methods:{async fnExportToWord(){await this.$axios.post("auth/file-manager/export-to-word",{bangDiem:this.bangDiem,cauHoi:this.cauHoi,danhMuc:this.categoryId,donVi:this.$route.params.orgId}).then((t=>{window.location.href="https://cscchcsadec.dongthap.gov.vn/storage/files/BienBan/"+t.data.file}))},async fnGetDanhMuc(){await this.$axios.get("auth/khao-sat/xac-nhan/danh-muc",{params:{namApDung:this.year}}).then((t=>{this.categories=t.data?.data.map((t=>({id:t.id,name:t.tenDanhMuc})))})).catch().finally((()=>this.tempCatId=0==parseInt(this.$route.query.categoryId.toString())?this.categories[0].id:parseInt(this.$route.query.categoryId.toString()))),await this.fnGetAvailable()},fnGetCauHoi(){this.$axios.get("auth/khao-sat/xac-nhan/cau-hoi",{params:{maDanhMuc:this.categoryId,maDonVi:this.$route.params.orgId}}).then((t=>{this.iData=t.data.data.map((t=>w.x.fromJson(t)));const e=[],a=[];this.iData.forEach((t=>{const i=0===t.parentId?t.diemLonNhat:0;this.total1=this.total1+i,1!==t.danhDauCau&&3!==t.danhDauCau||(t.bangdiem||(t.bangdiem=H.Q.baseJson(),t.bangdiem.maCauHoi=t.id,t.bangdiem.maDanhMuc=this.categoryId,t.bangdiem.parentId=t.parentId),e.push(H.Q.fromJson(t.bangdiem))),a.push({maCauHoi:t.id,parentId:t.parentId,loaiCauHoi:t.loaiCauHoi,loaiDieuKien:t.loaiDieuKien,diem:0,diemThamDinh:0})})),setTimeout((()=>{this.$store.commit("khaoSatStore/bangDiem",e),this.$store.commit("khaoSatStore/cauHoi",a)}),1)})).catch()},async fnGetAvailable(){await this.$axios.post("auth/khao-sat/xac-nhan/kiem-tra-hop-le",{maDanhMuc:this.categoryId,maDonVi:this.$route.params.orgId}).then((()=>{this.disableSubmit=!1,this.$store.commit("khaoSatStore/kiemTraThamDinh",this.disableSubmit)})).catch()},fnSubmit(){this.isSubmitting=!0,this.$axios.post("auth/khao-sat/xac-nhan/gui-diem",{maDonVi:this.$route.params.orgId,namApDung:this.year,maDanhMuc:this.categoryId,bangDiem:this.bangDiem}).then((t=>{this.$store.dispatch("SnackbarStore/showSnackBar",t.data)})).catch().finally((()=>{this.isSubmitting=!1,this.fnGetAvailable()}))},fnKetThuc(){this.isSubmitting=!0,this.$axios.post("auth/khao-sat/xac-nhan/gui-diem-tong-hop",{maDonVi:this.$route.params.orgId,namApDung:this.year,maDanhMuc:this.categoryId,diem:this.total2}).then((t=>{this.$store.dispatch("SnackbarStore/showSnackBar",t.data)})).catch().finally((()=>{this.isSubmitting=!1,this.fnGetAvailable()}))}}},Z=V,G=a(1835),B=a(2371),P=a(7118),F=a(2102),A=a(1418),O=a(2877),j=a(9762),J=(0,d.Z)(Z,i,n,!1,null,null,null),R=J.exports;c()(J,{VAutocomplete:G.Z,VBtn:m.Z,VCard:B.Z,VCardActions:P.h7,VCardSubtitle:P.Qq,VCardText:P.ZB,VCol:F.Z,VDivider:A.Z,VIcon:p.Z,VRow:O.Z,VSelect:y.Z,VSpacer:j.Z})}}]);
//# sourceMappingURL=498.d2fb3df3.js.map