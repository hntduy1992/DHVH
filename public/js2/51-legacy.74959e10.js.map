{"version":3,"file":"js/51-legacy.74959e10.js","mappings":"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","sources":["webpack://SaDec/./src/models/moduleModel.js","webpack://SaDec/./src/models/roleModel.js","webpack://SaDec/./src/pages/Auth/Roles/_id.vue?1b4a","webpack://SaDec/src/pages/Auth/Roles/_id.vue","webpack://SaDec/./src/pages/Auth/Roles/_id.vue?5e97","webpack://SaDec/./src/pages/Auth/Roles/_id.vue"],"sourcesContent":["const fromJson = (item, idx) => {\r\n  return {\r\n    id: `Node-${idx}`,\r\n    displayName: item.name,\r\n    children: item?.permissions.length === 0\r\n      ? []\r\n      : (item.permissions).map(i => ({\r\n          id: i.id,\r\n          displayName: i.display_name\r\n        }))\r\n  }\r\n}\r\n\r\nconst baseJson = () => {\r\n  return {\r\n    id: null,\r\n    name: null,\r\n    permissions: []\r\n  }\r\n}\r\n\r\nexport const moduleModel = {\r\n  fromJson,\r\n  baseJson\r\n}\r\n","const toJson = (item) => {\r\n  return {\r\n    id: item.id,\r\n    name: item.name,\r\n    guard_name: item.guard_name,\r\n    permissions: item.permissions\r\n  }\r\n}\r\n\r\nconst fromJson = (item) => {\r\n  return {\r\n    id: item.id,\r\n    name: item.name,\r\n    guard_name: item.guard_name,\r\n    permissions: item.permissions,\r\n    created_at: item.created_at\r\n  }\r\n}\r\n\r\nconst baseJson = () => {\r\n  return {\r\n    id: null,\r\n    name: null,\r\n    guard_name: 'api',\r\n    permissions: []\r\n  }\r\n}\r\n\r\nexport const roleModel = {\r\n  toJson, fromJson, baseJson\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('LayoutDefault',[_c('validation-observer',{ref:\"observer\"},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('IBreadcrumb',{attrs:{\"items\":_vm.breadcrumbs}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"dense\":\"\",\"elevation\":\"0\"}},[_c('v-toolbar-title',[_vm._v(\"THÔNG TIN\")])],1),_c('v-divider'),_c('v-card-text',[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"12\"}},[_c('VTextValidation',{attrs:{\"dense\":\"\",\"outlined\":\"\",\"label\":\"Tên phân quyền\",\"rules\":{ required: true }},model:{value:(_vm.item.name),callback:function ($$v) {_vm.$set(_vm.item, \"name\", $$v)},expression:\"item.name\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"12\"}},[_c('v-select',{attrs:{\"dense\":\"\",\"outlined\":\"\",\"label\":\"Guard\",\"items\":['api','web']},model:{value:(_vm.item.guard_name),callback:function ($$v) {_vm.$set(_vm.item, \"guard_name\", $$v)},expression:\"item.guard_name\"}})],1)],1)],1)],1)],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"dense\":\"\",\"elevation\":\"0\"}},[_c('v-toolbar-title',[_vm._v(\"CHỨC NĂNG\")]),_c('v-spacer'),_c('v-text-field',{staticClass:\"mr-2\",staticStyle:{\"max-width\":\"210px\"},attrs:{\"label\":\"Tìm kiếm\",\"hide-details\":\"\",\"clearable\":\"\",\"clear-icon\":\"mdi-close-circle-outline\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-divider'),_c('v-card-text',[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-treeview',{attrs:{\"selectable\":\"\",\"return-object\":\"\",\"selected-color\":\"error\",\"item-text\":\"displayName\",\"load-children\":_vm.fnGetPermission,\"items\":_vm.items,\"search\":_vm.search,\"open-all\":true},model:{value:(_vm.permissions),callback:function ($$v) {_vm.permissions=$$v},expression:\"permissions\"}})],1)],1)],1),_c('v-divider'),_c('v-card-actions',{staticClass:\"justify-end\"},[_c('v-btn',{attrs:{\"elevation\":\"0\",\"shaped\":\"\",\"color\":\"warning\"},on:{\"click\":_vm.fnReset}},[_c('v-icon',[_vm._v(\"mdi-reload\")]),_vm._v(\" Làm lại \")],1),_c('v-btn',{attrs:{\"elevation\":\"0\",\"shaped\":\"\",\"color\":\"error\"},on:{\"click\":_vm.fnSubmit}},[_c('v-icon',[_vm._v(\"mdi-content-save\")]),_vm._v(\" Lưu lại \")],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <LayoutDefault>\r\n    <validation-observer ref=\"observer\">\r\n      <v-row>\r\n        <v-col cols=\"12\">\r\n          <IBreadcrumb :items=\"breadcrumbs\" />\r\n        </v-col>\r\n        <v-col cols=\"12\">\r\n          <v-card>\r\n            <v-toolbar dense elevation=\"0\">\r\n              <v-toolbar-title>THÔNG TIN</v-toolbar-title>\r\n            </v-toolbar>\r\n            <v-divider />\r\n            <v-card-text>\r\n              <v-row dense>\r\n                <v-col cols=\"12\" sm=\"12\" md=\"12\">\r\n                  <VTextValidation\r\n                      v-model=\"item.name\"\r\n                      dense\r\n                      outlined\r\n                      label=\"Tên phân quyền\"\r\n                      :rules=\"{ required: true }\"\r\n                  />\r\n                </v-col>\r\n                <v-col cols=\"12\" sm=\"12\" md=\"12\">\r\n                  <v-select\r\n                      v-model=\"item.guard_name\"\r\n                      dense\r\n                      outlined\r\n                      label=\"Guard\"\r\n                      :items=\"['api','web']\"\r\n                  />\r\n                </v-col>\r\n              </v-row>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col cols=\"12\">\r\n          <v-card>\r\n            <v-toolbar dense elevation=\"0\">\r\n              <v-toolbar-title>CHỨC NĂNG</v-toolbar-title>\r\n              <v-spacer />\r\n              <v-text-field\r\n                  v-model=\"search\"\r\n                  label=\"Tìm kiếm\"\r\n                  hide-details\r\n                  clearable\r\n                  clear-icon=\"mdi-close-circle-outline\"\r\n                  style=\"max-width: 210px\"\r\n                  class=\"mr-2\"\r\n              />\r\n            </v-toolbar>\r\n            <v-divider />\r\n            <v-card-text>\r\n              <v-row dense>\r\n                <v-col cols=\"12\">\r\n                  <v-treeview\r\n                      v-model=\"permissions\"\r\n                      selectable\r\n                      return-object\r\n                      selected-color=\"error\"\r\n                      item-text=\"displayName\"\r\n                      :load-children=\"fnGetPermission\"\r\n                      :items=\"items\"\r\n                      :search=\"search\"\r\n                      :open-all=\"true\"\r\n                  />\r\n                </v-col>\r\n              </v-row>\r\n            </v-card-text>\r\n            <v-divider />\r\n            <v-card-actions class=\"justify-end\">\r\n              <v-btn elevation=\"0\" shaped color=\"warning\" @click=\"fnReset\">\r\n                <v-icon>mdi-reload</v-icon>\r\n                Làm lại\r\n              </v-btn>\r\n              <v-btn elevation=\"0\" shaped color=\"error\" @click=\"fnSubmit\">\r\n                <v-icon>mdi-content-save</v-icon>\r\n                Lưu lại\r\n              </v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n    </validation-observer>\r\n  </LayoutDefault>\r\n</template>\r\n\r\n<script>\r\nimport { ValidationObserver } from 'vee-validate'\r\nimport VTextValidation from '@/components/Validations/VTextValidation'\r\nimport { roleModel } from '@/models/roleModel'\r\nimport { moduleModel } from '@/models/moduleModel'\r\nimport LayoutDefault from \"@/layouts/default\";\r\nimport IBreadcrumb from \"@/components/IBreadcrumb\";\r\n\r\nexport default {\r\n  components: {\r\n    LayoutDefault,\r\n    VTextValidation,\r\n    ValidationObserver,\r\n    IBreadcrumb\r\n  },\r\n  data() {\r\n    return {\r\n      breadcrumbs: [\r\n        {\r\n          text: 'Dashboard',\r\n          disabled: false,\r\n          href: 'Dashboard'\r\n        }, {\r\n          text: 'Quản Lý Phân Quyền',\r\n          disabled: false,\r\n          href: '/Auth/Roles'\r\n        },\r\n        {\r\n          text: 'Cập nhật thông tin',\r\n          disabled: false,\r\n          href: ''\r\n        }\r\n      ],\r\n      loading: false,\r\n      item: roleModel.baseJson(),\r\n      items: [{\r\n        id: 'Root-1',\r\n        displayName: 'Toàn quyền',\r\n        children: []\r\n      }],\r\n      search: null,\r\n      permissions: []\r\n    }\r\n  },\r\n  watch: {\r\n    permissions(val) {\r\n      this.item.permissions = val.map(item => item.id)\r\n    }\r\n  },\r\n  methods: {\r\n    async fnGetPermission() {\r\n      await this.axios.get('auth/roles/modules').then((item) => {\r\n        this.items[0].children = (item.data.data).map((item, idx) => moduleModel.fromJson(item, idx))\r\n      }).catch((e) => {\r\n        console.log('e = ', e)\r\n      })\r\n      await this.fnGetDetail()\r\n    },\r\n    async fnGetDetail() {\r\n      await this.axios.get('auth/roles/edit/'+ this.$route.params.id).then((item) => {\r\n        this.item = roleModel.fromJson(item.data.data)\r\n        this.permissions = this.item.permissions\r\n      }).catch()\r\n    },\r\n    async fnSubmit() {\r\n      this.loading = true\r\n      const valid = await this.$refs.observer.validate()\r\n      if (!valid) {\r\n        this.loading = false\r\n        return false\r\n      }\r\n      this.axios.post('auth/roles/edit/' + this.$route.params.id, roleModel.toJson(this.item)).then((res) => {\r\n        this.$store.dispatch('SnackbarStore/showSnackBar', res.data)\r\n        this.fnReset()\r\n      }).catch().finally(() => {\r\n        this.loading = false\r\n      })\r\n    },\r\n    async fnReset() {\r\n      await this.fnGetDetail()\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_id.vue?vue&type=template&id=a84191f2&\"\nimport script from \"./_id.vue?vue&type=script&lang=js&\"\nexport * from \"./_id.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\nimport { VTreeview } from 'vuetify/lib/components/VTreeview';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCol,VDivider,VIcon,VRow,VSelect,VSpacer,VTextField,VToolbar,VToolbarTitle,VTreeview})\n"],"names":["fromJson","item","idx","id","displayName","name","children","permissions","length","map","i","display_name","baseJson","moduleModel","toJson","guard_name","created_at","roleModel","render","_vm","this","_h","$createElement","_c","_self","ref","attrs","breadcrumbs","_v","required","model","value","callback","$$v","$set","expression","staticClass","staticStyle","search","fnGetPermission","items","on","fnReset","fnSubmit","staticRenderFns","components","LayoutDefault","VTextValidation","ValidationObserver","IBreadcrumb","data","text","disabled","href","loading","watch","val","methods","catch","console","fnGetDetail","valid","finally","component","VBtn"],"sourceRoot":""}