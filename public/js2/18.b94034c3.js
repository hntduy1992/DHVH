"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[18],{6049:function(e,t,s){s.r(t),s.d(t,{default:function(){return S}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("LayoutDefault",[s("validation-observer",{ref:"observer"},[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("IBreadcrumb",{attrs:{items:e.breadcrumbs}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-card",[s("v-toolbar",{attrs:{dense:"",elevation:"0"}},[s("v-toolbar-title",[e._v("THÔNG TIN")])],1),s("v-divider"),s("v-card-text",[s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[s("VTextValidation",{attrs:{dense:"",outlined:"",label:"Tên tài khoản",rules:{required:!0,regex:/^(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/}},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[s("VTextValidation",{attrs:{dense:"",outlined:"",label:"Mật khẩu","append-icon":e.showPwd?"mdi-eye":"mdi-eye-off",rules:{required:!0,min:6},type:e.showPwd?"text":"password"},on:{"click:append":function(t){e.showPwd=!e.showPwd}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[s("VTextValidation",{attrs:{dense:"",outlined:"",label:"Họ và tên",rules:{required:!0}},model:{value:e.user.fullName,callback:function(t){e.$set(e.user,"fullName",t)},expression:"user.fullName"}})],1),s("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[s("VTextValidation",{attrs:{dense:"",outlined:"",label:"Email",rules:{email:!0}},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),s("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[s("VTextValidation",{attrs:{type:"tel",dense:"",outlined:"",label:"Số điện thoại"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),s("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[s("v-autocomplete",{attrs:{dense:"",outlined:"",label:"Cơ quan",placeholder:"-- Chọn","item-text":"name","item-value":"id","return-object":!1,items:e.organizations,clearable:""},model:{value:e.user.organizationId,callback:function(t){e.$set(e.user,"organizationId",t)},expression:"user.organizationId"}})],1),s("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[s("VSelectValidation",{attrs:{dense:"",outlined:"",multiple:"",label:"Phân quyền","item-text":"name","item-value":"id","item-color":"red","return-object":!1,items:e.roles,rules:{required:!0}},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,o=t.index;return[0===o?s("v-chip",{attrs:{color:"success",small:""}},[s("span",[e._v(e._s(a.name))])]):e._e(),1===o?s("span",{staticClass:"grey--text text-caption"},[e._v(" (+"+e._s(e.user.roles.length-1)+" khác) ")]):e._e()]}}]),model:{value:e.user.roles,callback:function(t){e.$set(e.user,"roles",t)},expression:"user.roles"}})],1),s("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[s("v-select",{attrs:{dense:"",outlined:"",label:"Trạng thái","item-text":"name","item-value":"id",items:[{id:0,name:"Chưa kích hoạt"},{id:1,name:"Hoạt động"},{id:2,name:"Tạm khóa"}],"return-object":!1},model:{value:e.user.status,callback:function(t){e.$set(e.user,"status",t)},expression:"user.status"}})],1)],1)],1),s("v-divider"),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{attrs:{elevation:"0",shaped:"",color:"warning"},on:{click:e.fnReset}},[s("v-icon",[e._v("mdi-reload")]),e._v(" Làm lại ")],1),s("v-btn",{attrs:{elevation:"0",shaped:"",color:"error",loading:e.loading},on:{click:e.fnSubmit}},[s("v-icon",[e._v("mdi-content-save")]),e._v(" Lưu lại ")],1)],1)],1)],1)],1)],1)],1)},o=[],r=s(2954),l=s(5486),n=s(5871),i=s(1548),d=s(3578),u=s(2013),c={name:"User-index",components:{LayoutDefault:d.Z,VSelectValidation:i.Z,VTextValidation:l.Z,ValidationObserver:r._j,IBreadcrumb:u.Z},data(){return{breadcrumbs:[{text:"Dashboard",disabled:!1,href:"Dashboard"},{text:"Quản lý tài khoản",disabled:!1,href:"/auth/users"},{text:"Thêm mới",disabled:!1,href:""}],loading:!1,isLoading:!1,showPwd:!1,user:n.$.baseJson(),organizations:[],roles:[]}},created(){this.fnGetRoles(),this.fnGetOrg()},methods:{async fnGetOrg(){await this.$axios.get("auth/don-vi/select").then((e=>{this.organizations=e.data.data.map((e=>({id:e.id,name:e.tenDonVi})))})).catch()},async fnGetRoles(){await this.axios.get("auth/roles/all").then((e=>{this.roles=e.data.data.map((e=>({id:e.id,name:e.name})))})).catch()},async fnSubmit(){this.loading=!0;const e=await this.$refs.observer.validate();if(!e)return this.loading=!1,!1;this.axios.post("auth/users/create",n.$.toJson(this.user)).then((e=>{this.$store.dispatch("SnackbarStore/showSnackBar",e.data),this.fnReset()})).catch().finally((()=>{this.loading=!1}))},async fnReset(){await this.$refs.observer.reset(),this.user=n.$.baseJson()}}},m=c,h=s(1001),v=s(3453),b=s.n(v),f=s(1835),p=s(680),x=s(2371),V=s(7118),w=s(5424),k=s(2102),g=s(1418),_=s(6428),Z=s(2877),$=s(3986),T=s(6656),y=s(7921),C=(0,h.Z)(m,a,o,!1,null,null,null),S=C.exports;b()(C,{VAutocomplete:f.Z,VBtn:p.Z,VCard:x.Z,VCardActions:V.h7,VCardText:V.ZB,VChip:w.Z,VCol:k.Z,VDivider:g.Z,VIcon:_.Z,VRow:Z.Z,VSelect:$.Z,VToolbar:T.Z,VToolbarTitle:y.qW})}}]);
//# sourceMappingURL=18.b94034c3.js.map