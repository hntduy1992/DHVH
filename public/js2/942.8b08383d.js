"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[942],{5849:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("LayoutDefault",[a("validation-observer",{ref:"observer"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("IBreadcrumb",{attrs:{items:e.breadcrumbs}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-toolbar",{attrs:{dense:"",elevation:"0"}},[a("v-toolbar-title",[e._v("THÔNG TIN")])],1),a("v-divider"),a("v-card-text",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("VAutoCompleteValidation",{attrs:{dense:"",outlined:"",label:"Bộ tiêu chí","item-value":"id","item-text":"name","return-object":!1,rules:{required:!0},items:e.categories,clearable:""},model:{value:e.categoryId,callback:function(t){e.categoryId=t},expression:"categoryId"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("VAutoCompleteValidation",{attrs:{dense:"",outlined:"",label:"Tiêu chí cha","item-value":"id","item-text":"name",items:e.questions,"return-object":!1,loading:e.isLoading,clearable:""},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item;return[a("span",{style:{"text-indent":10*i.level+"px","font-size":"12px"}},[e._v(e._s(i.stt)+" "+e._s(i.name))])]}}]),model:{value:e.item.parentId,callback:function(t){e.$set(e.item,"parentId",t)},expression:"item.parentId"}})],1),a("v-col",{attrs:{cols:"12",sm:"2",md:"1"}},[a("VTextValidation",{attrs:{dense:"",outlined:"",label:"Số thứ tự"},model:{value:e.item.stt,callback:function(t){e.$set(e.item,"stt",t)},expression:"item.stt"}})],1),a("v-col",{attrs:{cols:"12",sm:"10",md:"11"}},[a("VTextValidation",{attrs:{dense:"",outlined:"",label:"Tiêu chí",rules:{required:!0}},model:{value:e.item.tenCauHoi,callback:function(t){e.$set(e.item,"tenCauHoi",t)},expression:"item.tenCauHoi"}})],1),a("v-col",{attrs:{cols:"12",sm:"3",md:"2"}},[a("VTextValidation",{attrs:{dense:"",outlined:"",label:"Điểm nhỏ nhất",rules:{required:!0}},model:{value:e.item.diemNhoNhat,callback:function(t){e.$set(e.item,"diemNhoNhat",t)},expression:"item.diemNhoNhat"}})],1),a("v-col",{attrs:{cols:"12",sm:"3",md:"2"}},[a("VTextValidation",{attrs:{dense:"",outlined:"",label:"Bước nhảy",rules:{required:!0}},model:{value:e.item.buocNhay,callback:function(t){e.$set(e.item,"buocNhay",t)},expression:"item.buocNhay"}})],1),a("v-col",{attrs:{cols:"12",sm:"3",md:"2"}},[a("VTextValidation",{attrs:{dense:"",outlined:"",label:"Điểm lớn nhất",rules:{required:!0}},model:{value:e.item.diemLonNhat,callback:function(t){e.$set(e.item,"diemLonNhat",t)},expression:"item.diemLonNhat"}})],1),a("v-col",{attrs:{cols:"12",sm:"3",md:"2"}},[a("v-select",{attrs:{dense:"",outlined:"",label:"Điều kiện","item-text":"name","item-value":"code",items:[{code:"AND",name:"AND (và)"},{code:"OR",name:"OR (hoặc)"}]},model:{value:e.item.loaiDieuKien,callback:function(t){e.$set(e.item,"loaiDieuKien",t)},expression:"item.loaiDieuKien"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"2"}},[a("v-select",{attrs:{dense:"",outlined:"",label:"Đánh dấu câu","item-text":"name","item-value":"code",items:[{code:0,name:"Câu hỏi cấp trên"},{code:1,name:"Câu hỏi"},{code:2,name:"Câu trả lời"},{code:3,name:"Câu đặc biệt"}]},model:{value:e.item.danhDauCau,callback:function(t){e.$set(e.item,"danhDauCau",t)},expression:"item.danhDauCau"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"2"}},[a("v-select",{attrs:{dense:"",outlined:"",label:"Kiểu nhập điểm","item-text":"name","item-value":"code",disabled:2!=e.item.danhDauCau&&3!=e.item.danhDauCau,items:[{code:"Text",name:"Nhập điểm (Input)"},{code:"Select",name:"Chọn điểm (Select)"},{code:"Checkbox",name:"Chọn điểm (Checkbox)"},{code:"Radio",name:"Chọn điểm (Radio)"}]},model:{value:e.item.kieuNhapLieu,callback:function(t){e.$set(e.item,"kieuNhapLieu",t)},expression:"item.kieuNhapLieu"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"6"}},[a("v-select",{attrs:{dense:"",outlined:"",label:"Loại tiêu chí","item-text":"name","item-value":"code",items:[{code:1,name:"Đánh giá"},{code:2,name:"Điều tra xã hội học"}]},model:{value:e.item.loaiCauHoi,callback:function(t){e.$set(e.item,"loaiCauHoi",t)},expression:"item.loaiCauHoi"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[a("v-select",{attrs:{dense:"",outlined:"",label:"Trạng thái","item-text":"name","item-value":"id",items:[{id:1,name:"Mở"},{id:2,name:"Đóng"}],"return-object":!1,"hide-details":""},model:{value:e.item.trangThai,callback:function(t){e.$set(e.item,"trangThai",t)},expression:"item.trangThai"}})],1)],1)],1),a("v-divider"),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{elevation:"0",shaped:"",color:"warning"},on:{click:e.fnReset}},[a("v-icon",[e._v("mdi-reload")]),e._v(" Làm lại ")],1),a("v-btn",{attrs:{elevation:"0",shaped:"",color:"error"},on:{click:e.fnSubmit}},[a("v-icon",[e._v("mdi-content-save")]),e._v(" Lưu lại ")],1)],1)],1)],1)],1)],1)],1)},s=[],o=a(2954),n=a(5486),l=a(73),d=a(7867),c=a(3578),r=a(2013),m={components:{LayoutDefault:c.Z,VAutoCompleteValidation:d.Z,VTextValidation:n.Z,ValidationObserver:o._j,IBreadcrumb:r.Z},data(){return{breadcrumbs:[{text:"DASHBOARD",disabled:!1,href:"Dashboard"},{text:"TIÊU CHÍ ĐÁNH GIÁ",disabled:!1,href:"/Auth/KhaoSat/CauHoi"},{text:"Cập Nhật Thông Tin",disabled:!1,href:""}],loading:!1,isLoading:!1,item:l.x.baseJson(),categoryId:null,categories:[],questions:[]}},watch:{categoryId(e){this.item.maDanhMuc=e,this.fnGetQuestions()}},created(){this.fnGetCategories(),this.fnGetDetail()},methods:{async fnGetCategories(){await this.$axios.get("auth/khao-sat/danh-muc/select").then((e=>{this.categories=e.data.data.map((e=>({id:e.id,name:e.tenDanhMuc})))})).catch()},async fnGetQuestions(){this.isLoading=!0,await this.$axios.get("auth/khao-sat/cau-hoi/tree",{params:{categoryId:this.categoryId}}).then((e=>{this.questions=e.data.data.map((e=>({id:e.id,stt:e.stt,level:e.level,name:e.tenCauHoi})))})).finally((()=>{this.isLoading=!1}))},async fnGetDetail(){await this.$axios.get("auth/khao-sat/cau-hoi/id/"+this.$route.params.id).then((e=>{this.item=l.x.fromJson(e.data.data),this.categoryId=this.item.maDanhMuc}))},async fnSubmit(){this.loading=!0;const e=await this.$refs.observer.validate();if(!e)return this.loading=!1,!1;this.$axios.post("auth/khao-sat/cau-hoi/id/"+this.$route.params.id,l.x.toJson(this.item)).then((e=>{this.$store.dispatch("SnackbarStore/showSnackBar",e.data),this.fnReset()})).catch().finally((()=>{this.loading=!1}))},async fnReset(){await this.fnGetDetail()}}},u=m,h=a(1001),v=a(3453),b=a.n(v),f=a(680),x=a(2371),p=a(7118),C=a(2102),g=a(1418),k=a(6428),V=a(2877),y=a(3986),D=a(6656),N=a(7921),T=(0,h.Z)(u,i,s,!1,null,null,null),$=T.exports;b()(T,{VBtn:f.Z,VCard:x.Z,VCardActions:p.h7,VCardText:p.ZB,VCol:C.Z,VDivider:g.Z,VIcon:k.Z,VRow:V.Z,VSelect:y.Z,VToolbar:D.Z,VToolbarTitle:N.qW})}}]);
//# sourceMappingURL=942.8b08383d.js.map