"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[487],{454:function(e,t,s){s.d(t,{k:function(){return n}});const a=(e,t)=>({id:`Node-${t}`,displayName:e.name,children:0===e?.permissions.length?[]:e.permissions.map((e=>({id:e.id,displayName:e.display_name})))}),i=()=>({id:null,name:null,permissions:[]}),n={fromJson:a,baseJson:i}},5788:function(e,t,s){s.d(t,{_:function(){return r}});const a=e=>({id:e.id,name:e.name,guard_name:e.guard_name,permissions:e.permissions}),i=e=>({id:e.id,name:e.name,guard_name:e.guard_name,permissions:e.permissions,created_at:e.created_at}),n=()=>({id:null,name:null,guard_name:"api",permissions:[]}),r={toJson:a,fromJson:i,baseJson:n}},7161:function(e,t,s){s.r(t),s.d(t,{default:function(){return N}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("LayoutDefault",[s("validation-observer",{ref:"observer"},[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("IBreadcrumb",{attrs:{items:e.breadcrumbs}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-card",[s("v-toolbar",{attrs:{dense:"",elevation:"0"}},[s("v-toolbar-title",[e._v("THÔNG TIN")])],1),s("v-divider"),s("v-card-text",[s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[s("VTextValidation",{attrs:{dense:"",outlined:"",label:"Tên phân quyền",rules:{required:!0}},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}})],1),s("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[s("v-select",{attrs:{dense:"",outlined:"",label:"Guard",items:["api","web"]},model:{value:e.item.guard_name,callback:function(t){e.$set(e.item,"guard_name",t)},expression:"item.guard_name"}})],1)],1)],1)],1)],1),s("v-col",{attrs:{cols:"12"}},[s("v-card",[s("v-toolbar",{attrs:{dense:"",elevation:"0"}},[s("v-toolbar-title",[e._v("CHỨC NĂNG")]),s("v-spacer"),s("v-text-field",{staticClass:"mr-2",staticStyle:{"max-width":"210px"},attrs:{label:"Tìm kiếm","hide-details":"",clearable:"","clear-icon":"mdi-close-circle-outline"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),s("v-divider"),s("v-card-text",[s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"12"}},[s("v-treeview",{attrs:{selectable:"","return-object":"","selected-color":"error","item-text":"displayName",items:e.items,"load-children":e.fnGetPermission,search:e.search,"open-all":!0},model:{value:e.permissions,callback:function(t){e.permissions=t},expression:"permissions"}})],1)],1)],1),s("v-divider"),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{attrs:{elevation:"0",shaped:"",color:"warning"},on:{click:e.fnReset}},[s("v-icon",[e._v("mdi-reload")]),e._v(" Làm lại ")],1),s("v-btn",{attrs:{elevation:"0",shaped:"",color:"error"},on:{click:e.fnSubmit}},[s("v-icon",[e._v("mdi-content-save")]),e._v(" Lưu lại ")],1)],1)],1)],1)],1)],1)],1)},i=[],n=s(2954),r=s(5486),o=s(5788),l=s(454),d=s(2013),c=s(3578),m={name:"Role-create",components:{LayoutDefault:c.Z,VTextValidation:r.Z,ValidationObserver:n._j,IBreadcrumb:d.Z},data(){return{breadcrumbs:[{text:"Dashboard",disabled:!1,href:"Dashboard"},{text:"Quản Lý Phân Quyền",disabled:!1,href:"/auth/roles"},{text:"Thêm Mới",disabled:!1,href:""}],loading:!1,item:o._.baseJson(),items:[{id:"Root-1",displayName:"Toàn quyền",children:[]}],search:null,permissions:[]}},watch:{permissions(e){this.item.permissions=e.map((e=>e.id))}},methods:{async fnGetPermission(){await this.axios.get("auth/roles/modules").then((e=>{this.items[0].children=e.data.data.map(((e,t)=>l.k.fromJson(e,t)))}))},async fnSubmit(){this.loading=!0;const e=await this.$refs.observer.validate();if(!e)return this.loading=!1,!1;this.axios.post("auth/roles/create",o._.toJson(this.item)).then((e=>{this.$store.dispatch("SnackbarStore/showSnackBar",e.data),this.fnReset()})).catch().finally((()=>{this.loading=!1}))},async fnReset(){await this.$refs.observer.reset(),this.item=o._.baseJson(),this.permissions=[]}}},u=m,v=s(1001),h=s(3453),b=s.n(h),p=s(680),f=s(2371),_=s(7118),x=s(2102),V=s(1418),w=s(6428),y=s(2877),Z=s(3986),g=s(9762),k=s(5978),T=s(6656),C=s(7921),S=s(8080),J=(0,v.Z)(u,a,i,!1,null,null,null),N=J.exports;b()(J,{VBtn:p.Z,VCard:f.Z,VCardActions:_.h7,VCardText:_.ZB,VCol:x.Z,VDivider:V.Z,VIcon:w.Z,VRow:y.Z,VSelect:Z.Z,VSpacer:g.Z,VTextField:k.Z,VToolbar:T.Z,VToolbarTitle:C.qW,VTreeview:S.Z})}}]);
//# sourceMappingURL=487.551c05d9.js.map