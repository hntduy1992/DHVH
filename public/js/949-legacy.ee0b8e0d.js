"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[949],{86017:function(t,e,a){a.r(e),a.d(e,{default:function(){return N}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("LayoutDefault",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("IBreadcrumb",{attrs:{items:t.breadcrumbs}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-toolbar",{attrs:{dense:"",elevation:"0"}},[a("v-toolbar-title",[t._v("DANH SÁCH")]),a("v-spacer"),a("v-text-field",{staticClass:"mr-2",staticStyle:{"max-width":"210px"},attrs:{label:"Tìm kiếm",placeholder:"Nhập từ khóa","hide-details":"",dense:""},model:{value:t.keySearch,callback:function(e){t.keySearch=e},expression:"keySearch"}}),a("v-tooltip",{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:"",color:"primary",to:"Users/create"}},n),[a("v-icon",[t._v(" mdi-plus-circle ")])],1)]}}])},[a("span",[t._v("Thêm mới")])]),a("v-tooltip",{attrs:{top:"",color:"red"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("span",t._g({},n),[a("v-btn",{staticClass:"mr-1",attrs:{color:"error",icon:"",disabled:0===t.rowSelected.length},on:{click:function(e){return t.fnConfirm(!0)}}},[a("v-icon",[t._v("mdi-delete-circle")])],1)],1)]}}])},[a("span",[t._v("Xóa ")])])],1),a("v-divider"),a("IDataTable",{attrs:{headers:t.headers,items:t.items,total:t.totalRow,loading:t.loading},on:{"datatable::pagination":function(e){t.pagination=e},"datatable::selected":function(e){t.rowSelected=e}},scopedSlots:t._u([{key:"item.organizationId",fn:function(e){var n=e.item;return[n.organization?a("span",[t._v(t._s(n.organization.tenDonVi))]):a("span",[t._v("-")])]}},{key:"item.roles",fn:function(e){var n=e.value;return[n.length>0?a("span",t._l(n,(function(e){return a("v-chip",{key:e.id,attrs:{label:"",outlined:"",small:"",color:t.colors[e.id-1>0?e.id-1:0]}},[t._v(t._s(e.name))])})),1):a("span",[t._v("-")])]}},{key:"item.action",fn:function(e){var n=e.item;return[a("ContextMenu",{attrs:{items:[{name:"Chỉnh sửa",icon:"mdi-file-document-edit-outline",color:"blue",url:"Users/"+n.id},{name:"Xóa",icon:"mdi-delete-circle",color:"red",fn:function(){return t.fnConfirm(!1,n)}}]}})]}}],null,!0)})],1),a("v-dialog",{attrs:{scrollable:"","max-width":"400px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{width:"400"}},[a("v-card-title",[t._v("HỆ THỐNG")]),a("v-divider"),a("v-card-text",{staticClass:"pa-4"},[a("p",{staticStyle:{"font-size":"15px"}},[t._v(" Mọi thông tin liên quan sẽ bị mất theo. Bạn chắc chắn muốn xóa? ")])]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{elevation:"0",color:"warning darken-1"},on:{click:function(e){t.dialog=!1}}},[t._v(" Không ")]),a("v-btn",{attrs:{dark:"",elevation:"0",color:"red"},on:{click:t.fnDelete}},[t._v(" Có ")])],1)],1)],1)],1)],1)],1)},i=[],o=a(67906),r=a(16198),l=(a(41539),a(21249),a(33578)),s=a(42013),c=a(94472),d=a(30993),u={name:"user-index",components:{LayoutDefault:l.Z,IBreadcrumb:s.Z,IDataTable:c.Z,ContextMenu:d.Z},data:function(){return{breadcrumbs:[{text:"Dashboard",disabled:!1,href:"Dashboard"},{text:"Người dùng",disabled:!1,href:"/Auth/Users"}],singleSelected:{},rowSelected:[],pagination:null,keySearch:null,headers:[{text:"Tài khoản",value:"userName",width:160},{text:"Họ tên",value:"fullName",width:310},{text:"Phân quyền",value:"roles",width:210,sortable:!1},{text:"Đơn vị",value:"organizationId",sortable:!1,width:360},{text:null,value:"action",align:"end",width:50,sortable:!1}],items:[],totalRow:0,loading:!1,dialog:!1}},watch:{pagination:function(){this.fnGetList()},keySearch:function(){var t=this;clearTimeout(this._timerId),this._timerId=setTimeout((function(){t.fnGetList()}),600)}},computed:{colors:function(){return["#ff1a1a","#0040ff","#4d0000","#ff00ff","#00ffff","#ff1a1a","#0040ff","#4d0000","#ff00ff","#00ffff"]}},methods:{fnGetList:function(){var t=this;return(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.axios.get("auth/users",{params:{page:t.pagination.page,limit:t.pagination.itemsPerPage,sortBy:t.pagination.sortBy[0],sortDesc:t.pagination.sortDesc[0],content:t.keySearch}}).then((function(e){t.items=e.data.data.map((function(t){var e;return{id:t.id,userName:t.userName,fullName:t.fullName,organizationId:null===t||void 0===t?void 0:t.organizationId,organization:null===t||void 0===t?void 0:t.organization,roles:null!==(e=t.roles)&&void 0!==e?e:[],status:t.status}})),t.totalRow=e.data.totalRow})).finally((function(){t.loading=!1}));case 3:case"end":return e.stop()}}),e)})))()},fnConfirm:function(t,e){this.dialog=!0,t||(this.singleSelected=e,this.rowSelected=[])},fnDelete:function(){var t=this;return(0,r.Z)((0,o.Z)().mark((function e(){var a,n;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialog=!1,a=[],t.rowSelected.length>0?a=t.rowSelected.map((function(t){return t.id})):a.push(null===(n=t.singleSelected)||void 0===n?void 0:n.id),e.next=5,t.axios.post("auth/users/delete",{ids:a}).then((function(e){t.$store.dispatch("SnackbarStore/showSnackBar",e.data),t.fnGetList()})).catch();case 5:case"end":return e.stop()}}),e)})))()}}},f=u,v=a(1001),h=a(43453),m=a.n(h),p=a(680),g=a(32371),b=a(37118),w=a(95424),k=a(82102),x=a(4497),S=a(11418),_=a(96428),Z=a(62877),y=a(99762),C=a(55978),V=a(36656),D=a(27921),T=a(19330),I=(0,v.Z)(f,n,i,!1,null,null,null),N=I.exports;m()(I,{VBtn:p.Z,VCard:g.Z,VCardActions:b.h7,VCardText:b.ZB,VCardTitle:b.EB,VChip:w.Z,VCol:k.Z,VDialog:x.Z,VDivider:S.Z,VIcon:_.Z,VRow:Z.Z,VSpacer:y.Z,VTextField:C.Z,VToolbar:V.Z,VToolbarTitle:D.qW,VTooltip:T.Z})}}]);
//# sourceMappingURL=949-legacy.ee0b8e0d.js.map