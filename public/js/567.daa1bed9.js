"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[567],{4497:function(t,e,i){i.d(e,{Z:function(){return g}});i(6699);var a=i(3242),n=i(5795),s=i(5907),o=i(3944),l=i(390),h=i(423),r=i(5703),d=i(5600),u=i(3325),c=i(1824),m=i(4589);const p=(0,u.Z)(s.Z,o.Z,l.Z,h.Z,r.Z,n.Z);var g=p.extend({name:"v-dialog",directives:{ClickOutside:d.Z},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null===(e=this.previousActiveElement)||void 0===e||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,c.Jk)("full-width",this)},beforeMount(){this.$nextTick((()=>{this.isBooted=this.isActive,this.isActive&&this.show()}))},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick((()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout((()=>this.animate=!1),150)}))},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):l.Z.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((()=>{this.$nextTick((()=>{var t,e;(null===(t=this.$refs.dialog)||void 0===t?void 0:t.contains(document.activeElement))||(this.previousActiveElement=document.activeElement,null===(e=this.$refs.dialog)||void 0===e||e.focus()),this.bind()}))}))},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===m.Do.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick((()=>t&&t.focus()))}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&this.$refs.dialog&&![document,this.$refs.dialog].includes(e)&&!this.$refs.dialog.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((t=>t.contains(e)))){const t=this.$refs.dialog.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find((t=>!t.hasAttribute("disabled")&&!t.matches('[tabindex="-1"]')));e&&e.focus()}},genContent(){return this.showLazyContent((()=>[this.$createElement(a.Z,{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog","aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])]))},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,attrs:{tabindex:this.isActive?0:void 0},ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:(0,m.kb)(this.maxWidth),width:(0,m.kb)(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},7781:function(t,e,i){i.d(e,{Z:function(){return r}});i(6699);var a=i(5978),n=a.Z,s=i(5424),o=i(4589),l=i(1824),h=i(6290),r=n.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>(0,o.TI)(t).every((t=>null!=t&&"object"===typeof t))}},computed:{classes(){return{...n.options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce(((t,{size:e=0})=>t+e),0);return this.$vuetify.lang.t(this.counterSizeString,t,(0,o.XE)(e,1024===this.base))},internalArrayValue(){return(0,o.TI)(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((t=>{const{name:e="",size:i=0}=t,a=this.truncateText(e);return this.showSize?`${a} (${(0,o.XE)(i,1024===this.base)})`:a})):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&(0,l.N6)("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.multiple?t:t?[t]:[];(0,o.vZ)(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map(((t,e)=>this.$createElement(s.Z,{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t]))):[]},genControl(){const t=n.options.methods.genControl.call(this);return this.hideInput&&(t.data.style=(0,h.y0)(t.data.style,{display:"none"})),t},genInput(){const t=n.options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",(()=>{this.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach(((e,i)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[i],file:e,index:i}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=n.options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:t=>{t.target&&"LABEL"===t.target.nodeName||this.$refs.input.click()}},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}…${t.slice(t.length-e)}`}}})},2013:function(t,e,i){i.d(e,{Z:function(){return C}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app-bar",{staticClass:"m-toolbar",attrs:{elevation:"1",dense:""}},[i("ul",{staticClass:"breadcrumb hidden-xs-only"},t._l(t.items,(function(e){return i("li",{key:e.text},[i("router-link",{attrs:{to:e.href}},[t._v(t._s(e.text))])],1)})),0),i("v-breadcrumbs",{staticClass:"hidden-sm-and-up",attrs:{items:t.items},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item;return[i("v-breadcrumbs-item",{attrs:{href:a.href,disabled:a.disabled}},[t._v(" "+t._s(a.text.toUpperCase())+" ")])]}}])})],1)},n=[],s={props:["items"]},o=s,l=i(1001),h=i(3453),r=i.n(h),d=i(8320),u=i(6505),c=i(3325),m=(0,c.Z)(u.Z).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes(){return{"v-breadcrumbs__item":!0,[this.activeClass]:this.disabled}}},render(t){const{tag:e,data:i}=this.generateRouteLink();return t("li",[t(e,{...i,attrs:{...i.attrs,"aria-current":this.isActive&&this.isLink?"page":void 0}},this.$slots.default)])}}),p=i(4589),g=(0,p.Ji)("v-breadcrumbs__divider","li"),v=i(8085),f=(0,c.Z)(v.Z).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:()=>[]},large:Boolean},computed:{classes(){return{"v-breadcrumbs--large":this.large,...this.themeClasses}}},methods:{genDivider(){return this.$createElement(g,this.$slots.divider?this.$slots.divider:this.divider)},genItems(){const t=[],e=!!this.$scopedSlots.item,i=[];for(let a=0;a<this.items.length;a++){const n=this.items[a];i.push(n.text),e?t.push(this.$scopedSlots.item({item:n})):t.push(this.$createElement(m,{key:i.join("."),props:n},[n.text])),a<this.items.length-1&&t.push(this.genDivider())}return t}},render(t){const e=this.$slots.default||this.genItems();return t("ul",{staticClass:"v-breadcrumbs",class:this.classes},e)}}),b=(0,l.Z)(o,a,n,!1,null,"efea5b80",null),C=b.exports;r()(b,{VAppBar:d.Z,VBreadcrumbs:f,VBreadcrumbsItem:m})},5613:function(t,e,i){i.r(e),i.d(e,{default:function(){return J}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("LayoutDefault",[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("IBreadcrumb",{attrs:{items:t.breadcrumbs}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-card",[i("v-card-subtitle",[t._v("LỌC BỘ TIÊU CHÍ ĐÁNH GIÁ")]),i("v-divider"),i("v-card-text",[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"3"}},[i("v-select",{attrs:{dense:"",label:"Năm đánh giá","item-text":"name","item-value":"id",items:t.years,disabled:""},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1),i("v-col",{attrs:{cols:"12",sm:"9"}},[i("v-autocomplete",{attrs:{dense:"",label:"Bộ tiêu chí","item-text":"name","item-value":"id",items:t.categories,disabled:""},model:{value:t.categoryId,callback:function(e){t.categoryId=e},expression:"categoryId"}})],1)],1)],1)],1)],1),i("v-col",{attrs:{cols:"12"}},[i("v-card",[i("v-card-text",[i("table",{staticClass:"table",attrs:{id:"guiykien"}},[i("thead",[i("tr",[i("th",[t._v("STT")]),i("th",[t._v("Tiêu chí")]),i("th",[t._v("Điểm lớn nhất")]),i("th",[t._v("Tự đánh giá")]),i("th",[t._v("Đính kèm")]),i("th",[t._v("Ghi chú tự đánh giá")]),i("th",[t._v("Thẩm định")]),i("th",[t._v("Ghi chú thẩm định")]),i("th",[t._v("Ý kiến đơn vị")])])]),i("tbody",[t._l(t.iData,(function(e,a){return[e.danhDauCau<2?[i("CauHoi",{key:e+a,attrs:{question:e}})]:t._e(),e.danhDauCau>=2?[i("CauTraLoi",{key:e+a,attrs:{question:e}})]:t._e()]}))],2),i("tfoot",[0===t.iData.length?i("tr",[i("td",{staticClass:"text-center",attrs:{colspan:"9"}},[i("p",{staticClass:"ma-0"},[t._v(" Không tìm thấy dữ liệu ")])])]):t._e(),i("tr",[i("td"),i("td",{staticClass:"text-right font-weight-bold"},[t._v(" Tổng cộng ")]),i("td",{staticClass:"text-center"},[i("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.total1))])]),i("td",{staticClass:"text-center"},[i("span",{staticClass:"font-weight-bold"},[t._v(t._s(parseFloat(t.total).toFixed(2)))])]),i("td"),i("td"),i("td",{staticClass:"text-center",attrs:{colspan:"2"}},[i("span",{staticClass:"font-weight-bold red--text"},[t._v(t._s(parseFloat(t.total2).toFixed(2)))])]),i("td")])])])]),i("v-divider"),i("v-card-actions",[i("v-btn",{attrs:{color:"blue",dark:"",small:""},on:{click:t.fnExportToWord}},[i("v-icon",[t._v("mdi-file-export")]),t._v(" Xuất file ")],1),i("v-spacer"),i("v-btn",{attrs:{color:"primary",loading:t.isSubmitting,disabled:t.disableSubmit},on:{click:function(e){return e.stopPropagation(),t.fnSendYKien(!0)}}},[t._v(" Lưu ý kiến ")]),i("v-btn",{attrs:{color:"error",loading:t.isSubmitting,disabled:t.disableSubmit},on:{click:function(e){return e.stopPropagation(),t.fnSubmit.apply(null,arguments)}}},[t._v(" Gửi ý kiến ")])],1)],1),i("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{staticClass:"text-h5 red white--text"},[t._v(" HỆ THỐNG ")]),i("v-card-text",{staticClass:"pa-0"},[i("div",{staticClass:"pa-3"},[t._v("Nếu bạn không nhập ý kiến thì hệ thống sẽ mặc định "),i("span",{staticClass:"font-weight-bold"},[t._v('"thống nhất"')]),t._v(" với kết quả thẩm định. Bạn chắc chắc muốn tiếp tục gửi? ")])]),i("v-divider"),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"warning",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Hủy bỏ ")]),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.fnSendYKien}},[t._v(" Đồng ý ")])],1)],1)],1)],1)],1)],1)},n=[],s=i(629),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",{staticClass:"font-weight-bold text-center"},[t._v(" "+t._s(t.question.stt)+" ")]),i("td",[t._v(" "+t._s(t.question.tenCauHoi)+" ")]),i("td",{staticClass:"text-center"},[i("span",{class:{"font-weight-bold":!0,"red--text":0===t.question.level}},[t._v(t._s(parseFloat(t.question.diemLonNhat).toFixed(2)))])]),i("td",{staticClass:"text-center"},[i("span",{class:{"font-weight-bold":0==t.question.level,"red--text":0===t.question.level}},[t._v(t._s(parseFloat(t.diemTuDanhGia).toFixed(2)))])]),i("td",{attrs:{rowspan:1==t.question.danhDauCau&&t.question.childrenCount>0&&t.question.childrenCount+1}},[1==t.question.danhDauCau?[i("v-file-input",{staticStyle:{"min-height":"auto"},attrs:{dense:"","hide-details":"","prepend-icon":"","prepend-inner-icon":"mdi-upload",placeholder:"Chọn file",height:"20",clearable:"",disabled:t.disableYKien},on:{change:t.upload,"click:clear":t.clearFile}}),null!=t.fileName?i("div",{staticClass:"text-center"},[i("v-tooltip",{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"ma-2 white--text",attrs:{color:"blue-grey",elevation:"0",small:"",link:"",target:"_blank",href:t.download()}},"v-btn",n,!1),a),[i("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-cloud-download ")]),i("span",{staticClass:"ml-2"},[t._v("Tải về")])],1)]}}],null,!1,2256436589)},[i("span",[t._v(t._s(t.fileName.split("/").pop()))])])],1):t._e()]:t._e()],2),i("td",{staticClass:"text-center",attrs:{rowspan:1==t.question.danhDauCau&&t.question.childrenCount>0&&t.question.childrenCount+1}},[1==t.question.danhDauCau&&null!=t.ghiChuDanhGia?i("div",{staticStyle:{width:"150px"}},[i("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",rows:"2",readonly:!0},model:{value:t.ghiChuDanhGia,callback:function(e){t.ghiChuDanhGia=e},expression:"ghiChuDanhGia"}})],1):t._e()]),i("td",{staticClass:"text-center"},[i("span",{class:{"font-weight-bold":0==t.question.level,"red--text":0==t.question.level}},[t._v(t._s(parseFloat(t.diemThamDinh).toFixed(2)))])]),i("td",{staticClass:"text-center",attrs:{rowspan:1==t.question.danhDauCau&&t.question.childrenCount>0&&t.question.childrenCount+1}},[1===t.question.danhDauCau?[t.question.hasChild?t._e():i("div",{staticStyle:{width:"150px"}},[t.ghiChuThamDinh?i("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",rows:"2",readonly:!0},model:{value:t.ghiChuThamDinh,callback:function(e){t.ghiChuThamDinh=e},expression:"ghiChuThamDinh"}}):i("span",[t._v("Thống nhất")])],1)]:t._e()],2),i("td",{staticClass:"text-center",attrs:{rowspan:1===t.question.danhDauCau&&t.question.childrenCount>0&&t.question.childrenCount+1}},[1===t.question.danhDauCau?[t.question.hasChild?t._e():i("div",{staticStyle:{width:"150px"}},[!t.disableYKien||t.disableYKien&&null!=t.ghiChuYKien?i("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",rows:"2",readonly:t.disableYKien},model:{value:t.ghiChuYKien,callback:function(e){t.ghiChuYKien=e},expression:"ghiChuYKien"}}):i("span",[t._v("Thống nhất")])],1)]:t._e()],2)])},l=[],h={props:{question:{type:Object,default:null}},data(){return{dialog:!1,dialog2:!1,loading:!1,score:0,fileName:null,ghiChuDanhGia:null,ghiChuThamDinh:null,ghiChuYKien:null,dontHavePermission:!1,iReact:!0}},computed:{...(0,s.Se)("khaoSatStore",["bangDiem","cauHoi"]),...(0,s.rn)("khaoSatStore",["disableYKien","bangYKien"]),diemTuDanhGia(){return this.cauHoi.find((t=>t.maCauHoi===this.question.id))?.diem},diemThamDinh(){return this.cauHoi.find((t=>t.maCauHoi===this.question.id))?.diemThamDinh}},watch:{bangDiem(){if(1===this.question.danhDauCau){const t=this.bangDiem.find((t=>t.maCauHoi===this.question.id));this.fileName=JSON.parse(JSON.stringify(t.fileDanhGia)),this.ghiChuDanhGia=t.ghiChuDanhGia,this.ghiChuThamDinh=t.ghiChuThamDinh}},ghiChuYKien(t){t&&this.$store.commit("khaoSatStore/bangYKien",{id:this.question.id,content:t})}},methods:{download(){return"https://cscchcsadec.dongthap.gov.vn/storage/"+this.fileName},async upload(t){if(this.loading=!0,!t)return this.loading=!1,null;const e=new FormData;e.append("file",t),await this.$axios.post("auth/file-manager/singleUpload",e,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{t.data.success&&this.$store.commit("khaoSatStore/capNhatFile",{id:this.question?.bangdiem?.id,fileDanhGia:t.data.fileUrl})})).catch().finally((()=>{this.loading=!1}))},clearFile(){this.$store.commit("khaoSatStore/capNhatFile",{id:this.question?.bangdiem?.id,fileDanhGia:null})},capNhatBangDiem(){this.dialog2=!1;const t=JSON.parse(JSON.stringify(this.bangDiem)),e=t.findIndex((t=>t.maCauHoi===this.question.id));t[e].ghiChuThamDinh=this.ghiChuThamDinh,this.$store.commit("khaoSatStore/capNhatBangDiem",{index:e,value:t[e]})}},created(){this.ghiChuYKien=this.question?.ykien?.noiDung}},r=h,d=i(1001),u=i(3453),c=i.n(u),m=i(680),p=i(7781),g=i(6428),v=i(4350),f=i(9330),b=(0,d.Z)(r,o,l,!1,null,null,null),C=b.exports;c()(b,{VBtn:m.Z,VFileInput:p.Z,VIcon:g.Z,VTextarea:v.Z,VTooltip:f.Z});var x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[2===t.question.danhDauCau?[i("td",{staticClass:"text-center"},[t._v(" "+t._s(t.question.stt)+" ")]),i("td",[t._v(" "+t._s(t.question.tenCauHoi)+" ")]),i("td",{staticClass:"text-center font-italic"},[t._v(" "+t._s(t.question.diemLonNhat)+" ")]),i("td",{staticClass:"text-center"},[1===t.question.loaiCauHoi?["Text"===t.question.kieuNhapLieu?i("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Nhập điểm",disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):"Select"===t.question.kieuNhapLieu?i("v-select",{staticStyle:{width:"70px","min-width":"0",margin:"0 auto"},attrs:{dense:"","hide-details":"",placeholder:"Chọn","item-text":"name","item-value":"id","return-object":!1,items:t.points,disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):"Checkbox"===t.question.kieuNhapLieu?i("v-checkbox",{staticClass:"align-center justify-center pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",color:"red",value:t.question.diemLonNhat,"true-value":t.question.diemLonNhat,"input-value":t.question.diemLonNhat,disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):i("v-radio-group",{staticClass:"pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}},[i("v-radio",{attrs:{color:"red",value:t.question.diemLonNhat}})],1)]:t._e()],2),i("td",[["Text"===t.question.kieuNhapLieu?i("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Nhập điểm",disabled:!0},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):"Select"===t.question.kieuNhapLieu?i("v-select",{staticStyle:{width:"70px","min-width":"0",margin:"0 auto"},attrs:{dense:"","hide-details":"",placeholder:"Chọn","item-text":"name","item-value":"id","return-object":!1,items:t.points,disabled:!0},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):"Checkbox"===t.question.kieuNhapLieu?i("v-checkbox",{staticClass:"align-center justify-center pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",color:"red",value:t.question.diemLonNhat,"true-value":t.question.diemLonNhat,"input-value":t.question.diemLonNhat,disabled:!0},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):i("v-radio-group",{staticClass:"pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",disabled:!0},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}},[i("v-radio",{attrs:{color:"red",value:t.question.diemLonNhat}})],1)]],2)]:[i("td",{staticClass:"text-center"},[t._v(" "+t._s(t.question.stt)+" ")]),i("td",[t._v(" "+t._s(t.question.tenCauHoi)+" ")]),i("td"),i("td",{staticClass:"text-center"},[1===t.question.loaiCauHoi&&3===t.question.danhDauCau?["Text"===t.question.kieuNhapLieu?i("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Nhập điểm",disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):"Select"===t.question.kieuNhapLieu?i("v-select",{staticStyle:{width:"70px","min-width":"0",margin:"0 auto"},attrs:{dense:"","hide-details":"",placeholder:"Chọn","item-text":"name","item-value":"id","return-object":!1,items:t.points,disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):"Checkbox"===t.question.kieuNhapLieu?i("v-checkbox",{staticClass:"align-center justify-center pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",color:"red",value:t.question.diemLonNhat,"true-value":t.question.diemLonNhat,"input-value":t.question.diemLonNhat,disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}}):i("v-radio-group",{staticClass:"pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",disabled:!0},model:{value:t.formInput,callback:function(e){t.formInput=e},expression:"formInput"}},[i("v-radio",{attrs:{color:"red",value:t.question.diemLonNhat}})],1)]:[i("span",{staticClass:"font-weight-bold"},[t._v("ĐTXHH")])]],2),3===t.question.danhDauCau&&1===t.question.loaiCauHoi?[i("td",[i("v-file-input",{staticStyle:{"min-height":"auto"},attrs:{dense:"","hide-details":"","prepend-icon":"","prepend-inner-icon":"mdi-upload",placeholder:"Chọn file",height:"20",clearable:"",disabled:t.disableYKien},on:{change:t.upload,"click:clear":t.clearFile}}),i("div",{staticClass:"mt-0"},[t.loading?i("v-progress-linear",{attrs:{indeterminate:"",color:"indigo"}}):t._e()],1),null!=t.fileName?i("div",{staticClass:"text-center"},[i("v-tooltip",{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"ma-2 white--text",attrs:{color:"blue-grey",elevation:"0",small:"",link:"",target:"_blank",href:t.download()}},"v-btn",n,!1),a),[i("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-cloud-download ")]),i("span",{staticClass:"ml-2"},[t._v("Tải về")])],1)]}}],null,!1,2256436589)},[i("span",[t._v(t._s(t.fileName.split("/").pop()))])]),t.disableYKien?i("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(e){return t.clearFile()}}},[i("v-icon",[t._v("mdi-delete-circle-outline")])],1):t._e()],1):t._e()],1),i("td",{staticClass:"text-center"},[1===t.question.danhDauCau&&null!=t.ghiChuDanhGia?i("div",{staticStyle:{width:"150px"}},[i("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",rows:"2",readonly:!0},model:{value:t.ghiChuDanhGia,callback:function(e){t.ghiChuDanhGia=e},expression:"ghiChuDanhGia"}})],1):t._e()])]:t._e(),i("td",[["Text"===t.question.kieuNhapLieu?i("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",label:"Nhập điểm",disabled:!0},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):"Select"===t.question.kieuNhapLieu?i("v-select",{staticStyle:{width:"70px","min-width":"0",margin:"0 auto"},attrs:{dense:"","hide-details":"",placeholder:"Chọn","item-text":"name","item-value":"id","return-object":!1,items:t.points,disabled:!0},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):"Checkbox"===t.question.kieuNhapLieu?i("v-checkbox",{staticClass:"align-center justify-center pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",color:"red",value:t.question.diemLonNhat,"true-value":t.question.diemLonNhat,"input-value":t.question.diemLonNhat,disabled:!0},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}}):i("v-radio-group",{staticClass:"pa-0",staticStyle:{margin:"0 auto",width:"24px"},attrs:{dense:"","hide-details":"",disabled:!0},model:{value:t.formThamDinh,callback:function(e){t.formThamDinh=e},expression:"formThamDinh"}},[i("v-radio",{attrs:{color:"red",value:t.question.diemLonNhat}})],1)]],2),i("td",{staticClass:"text-center"},[3===t.question.danhDauCau?[t.question.hasChild?t._e():i("div",{staticStyle:{width:"150px"}},[t.ghiChuThamDinh?i("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",rows:"2",readonly:!0},model:{value:t.ghiChuThamDinh,callback:function(e){t.ghiChuThamDinh=e},expression:"ghiChuThamDinh"}}):i("span",[t._v("Thống nhất")])],1)]:t._e()],2),i("td",{staticClass:"text-center"},[3===t.question.danhDauCau?[t.question.hasChild?t._e():i("div",{staticStyle:{width:"150px"}},[!t.disableYKien||t.disableYKien&&null!=t.ghiChuYKien?i("v-textarea",{staticClass:"mt-2",attrs:{label:"Nội dung",dense:"",outlined:"","hide-details":"",rows:"2",readonly:t.disableYKien},model:{value:t.ghiChuYKien,callback:function(e){t.ghiChuYKien=e},expression:"ghiChuYKien"}}):i("span",[t._v("Thống nhất")])],1)]:t._e()],2)]],2)},y=[],D={props:{question:{type:Object,default:null}},data(){return{dialog:!1,dialog2:!1,loading:!1,formInput:null,formThamDinh:null,minQuestion:{},ghiChuThamDinh:null,ghiChuDanhGia:null,ghiChuYKien:null,fileName:null,iReact:!0,iReact2:!0}},computed:{...(0,s.Se)("khaoSatStore",["bangDiem","cauHoi","eventChange"]),...(0,s.rn)("khaoSatStore",["disableYKien","bangYKien","capNhatFileDanhGia"]),points(){const t=[];let e=JSON.parse(JSON.stringify(this.question.diemNhoNhat));while(Number(e.toFixed(2))<=this.question.diemLonNhat)t.push({id:Number(e.toFixed(2)),name:e.toFixed(2)}),e+=this.question.buocNhay;return t},parent(){return this.cauHoi.find((t=>t.maCauHoi===this.question.parentId))||{}},dontHavePermission(){return this.disableThamDinh}},watch:{ghiChuYKien(t){t&&this.$store.commit("khaoSatStore/bangYKien",{id:this.question.id,content:t})},eventChange(){0!==Object.keys(this.eventChange).length&&this.eventChange.maCauHoi===this.question.parentId&&this.eventChange.maCauTraLoi!==this.question.id&&(this.formThamDinh="")},bangDiem(){if(!this.iReact)return null;if(1===this.question.loaiCauHoi&&2===this.question.danhDauCau){const t=this.bangDiem.find((t=>t.maCauHoi===this.question.parentId));this.fnSetValueForm(t)}if((1===this.question.loaiCauHoi||2===this.question.loaiCauHoi)&&3===this.question.danhDauCau){const t=this.bangDiem.find((t=>t.maCauHoi===this.question.id));this.fnSetValueForm(t),this.fileName=t.fileDanhGia,this.ghiChuDanhGia=t.ghiChuDanhGia}}},methods:{download(){return"https://cscchcsadec.dongthap.gov.vn/storage/"+this.fileName},async upload(t){if(this.loading=!0,!t)return this.loading=!1,null;const e=new FormData;e.append("file",t),await this.$axios.post("auth/file-manager/singleUpload",e,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{t.data.success&&this.$store.commit("khaoSatStore/capNhatFile",{id:this.question?.bangdiem?.id,fileDanhGia:t.data.fileUrl})})).catch().finally((()=>{this.loading=!1}))},clearFile(){this.$store.commit("khaoSatStore/capNhatFile",{id:this.question?.bangdiem?.id,fileDanhGia:null})},capNhatBangDiem(){this.dialog2=!1;const t=JSON.parse(JSON.stringify(this.bangDiem)),e=t.findIndex((t=>t.maCauHoi===this.question.id));t[e].ghiChuThamDinh=this.ghiChuThamDinh,this.$store.commit("khaoSatStore/capNhatBangDiem",{index:e,value:t[e]})},fnSetValueForm(t){this.iReact=!1;const e=t?.noiDungTraLoi.find((t=>t.id===this.question.id));e&&(this.formInput=e.diem);const i=t?.noiDungThamDinh.find((t=>t.id===this.question.id));i&&(this.formThamDinh=i.diem),this.$store.dispatch("khaoSatStore/capNhatDiemCapTren",t)}},created(){this.ghiChuYKien=this.question?.ykien?.noiDung}},S=D,k=i(3702),_=i(7003),w=i(8978),T=i(4739),q=i(3986),N=i(5978),I=(0,d.Z)(S,x,y,!1,null,null,null),$=I.exports;c()(I,{VBtn:m.Z,VCheckbox:k.Z,VFileInput:p.Z,VIcon:g.Z,VProgressLinear:_.Z,VRadio:w.Z,VRadioGroup:T.Z,VSelect:q.Z,VTextField:N.Z,VTextarea:v.Z,VTooltip:f.Z});var Z=i(5806),V=i(73),L=i(3578),H=i(2013),F={metaInfo:{title:"Gửi ý kiến",titleTemplate:"%s - ĐÁNH GIÁ CHỈ SỐ CẢI CÁCH HÀNH CHÍNH SA ĐÉC",htmlAttrs:{lang:"vi",amp:!0}},components:{LayoutDefault:L.Z,IBreadcrumb:H.Z,CauTraLoi:$,CauHoi:C},data(){return{breadcrumbs:[{text:"DASHBOARD",disabled:!1,href:"Dashboard"},{text:"Gửi ý kiến",disabled:!1,href:"/Auth/KhaoSat/TuDanhGia/GuiYKien"}],category:{},iData:[],loading:!1,questions:[],year:(new Date).getFullYear(),categoryId:0,categories:[],isSubmitting:!1,disableSubmit:!0,total:0,total1:0,total2:0,dialog:!1}},computed:{...(0,s.rn)("khaoSatStore",["bangDiem","bangYKien","capNhatFileDanhGia","cauHoi"]),years(){const t=[],e=(new Date).getFullYear()+2;for(let i=2022;i<e;i++)t.push({id:i,name:`Năm ${i}`});return t.reverse()}},watch:{year(){this.categoryId=0,this.categories=[],this.data=[],this.fnGetDanhMuc()},categoryId(){this.data=[],this.fnGetCauHoi()},bangDiem(t){let e=0,i=0;t.forEach((t=>{e+=t.diem,i+=t.diemThamDinh})),this.total=e,this.total2=i},dialog(t){this.isSubmitting=t}},created(){this.fnGetDanhMuc()},methods:{async fnExportToWord(){await this.$axios.post("auth/file-manager/export-to-word",{bangDiem:this.bangDiem,cauHoi:this.cauHoi,danhMuc:this.categoryId,donVi:this.$route.params.orgId}).then((t=>{window.location.href="https://cscchcsadec.dongthap.gov.vn/storage/files/BienBan/"+t.data.file}))},async fnGetDanhMuc(){await this.$axios.get("auth/khao-sat/tu-danh-gia/danh-muc",{params:{namApDung:this.year}}).then((t=>{this.categories=t.data?.data.map((t=>({id:t.id,name:t.tenDanhMuc}))),this.categoryId=this.categories[0]?.id})).catch(),await this.fnGetAvailable()},fnGetCauHoi(){this.$axios.get("auth/khao-sat/tu-danh-gia/cau-hoi-y-kien",{params:{maDanhMuc:this.categoryId,maDonVi:this.$route.params.orgId}}).then((t=>{this.iData=t.data.data.map((t=>V.x.fromJson(t)));const e=[],i=[];this.total1=0,this.iData.forEach((t=>{const a=0===t.parentId?t.diemLonNhat:0;this.total1=this.total1+a,1!==t.danhDauCau&&3!==t.danhDauCau||(t.bangdiem||(t.bangdiem=Z.Q.baseJson(),t.bangdiem.maCauHoi=t.id,t.bangdiem.maDanhMuc=this.categoryId,t.bangdiem.parentId=t.parentId),e.push(Z.Q.fromJson(t.bangdiem))),i.push({maCauHoi:t.id,parentId:t.parentId,loaiCauHoi:t.loaiCauHoi,loaiDieuKien:t.loaiDieuKien,diem:0,diemThamDinh:0})})),setTimeout((()=>{this.$store.commit("khaoSatStore/bangDiem",e),this.$store.commit("khaoSatStore/cauHoi",i)}),1)})).catch()},async fnGetAvailable(){await this.$axios.post("auth/khao-sat/tu-danh-gia/kiem-tra-y-kien-hop-le",{maDanhMuc:this.categoryId}).then((t=>{this.disableSubmit=!t.data.data,this.$store.commit("khaoSatStore/kiemTraYKien",this.disableSubmit)})).catch()},fnSubmit(){this.isSubmitting=!0,this.dialog=!0},fnSendYKien(t){this.$axios.post("auth/khao-sat/tu-danh-gia/gui-y-kien",{maDanhMuc:this.categoryId,bangYKien:this.bangYKien,capNhatFileDanhGia:this.capNhatFileDanhGia,isSave:t}).then((t=>{this.$store.dispatch("SnackbarStore/showSnackBar",t.data)})).catch().finally((()=>{this.isSubmitting=!1,this.dialog=!1,this.fnGetAvailable()}))}}},G=F,A=i(1835),K=i(2371),B=i(7118),Y=i(2102),E=i(4497),O=i(1418),z=i(2877),j=i(9762),M=(0,d.Z)(G,a,n,!1,null,null,null),J=M.exports;c()(M,{VAutocomplete:A.Z,VBtn:m.Z,VCard:K.Z,VCardActions:B.h7,VCardSubtitle:B.Qq,VCardText:B.ZB,VCardTitle:B.EB,VCol:Y.Z,VDialog:E.Z,VDivider:O.Z,VIcon:g.Z,VRow:z.Z,VSelect:q.Z,VSpacer:j.Z})}}]);
//# sourceMappingURL=567.daa1bed9.js.map