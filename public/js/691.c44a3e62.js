"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[691],{8018:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("LayoutDefault",[a("validation-observer",{ref:"observer"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("IBreadcrumb",{attrs:{items:e.breadcrumbs}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-toolbar",{attrs:{dense:"",elevation:"0"}},[a("v-toolbar-title",[e._v("THÔNG TIN")])],1),a("v-divider"),a("v-card-text",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("VTextValidation",{attrs:{dense:"",outlined:"",label:"Tên tài khoản",rules:{required:!0,regex:/^(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/}},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("VTextValidation",{attrs:{dense:"",outlined:"",label:"Mật khẩu","append-icon":e.showPwd?"mdi-eye":"mdi-eye-off",rules:{min:6},type:e.showPwd?"text":"password"},on:{"click:append":function(t){e.showPwd=!e.showPwd}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("VTextValidation",{attrs:{dense:"",outlined:"",label:"Họ và tên",rules:{required:!0}},model:{value:e.user.fullName,callback:function(t){e.$set(e.user,"fullName",t)},expression:"user.fullName"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("VTextValidation",{attrs:{dense:"",outlined:"",label:"Email",rules:{email:!0}},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("VTextValidation",{attrs:{type:"tel",dense:"",outlined:"",label:"Số điện thoại"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-autocomplete",{attrs:{dense:"",outlined:"",label:"Cơ quan","item-text":"name","item-value":"id","return-object":!1,items:e.organizations},model:{value:e.user.organizationId,callback:function(t){e.$set(e.user,"organizationId",t)},expression:"user.organizationId"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("VSelectValidation",{attrs:{dense:"",outlined:"",multiple:"",label:"Phân quyền","item-text":"name","item-value":"id","item-color":"red","return-object":!1,items:e.roles,rules:{required:!0}},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.item,i=t.index;return[0===i?a("v-chip",{attrs:{color:"success",small:""}},[a("span",[e._v(e._s(s.name))])]):e._e(),1===i?a("span",{staticClass:"grey--text text-caption"},[e._v(" (+"+e._s(e.user.roles.length-1)+" khác) ")]):e._e()]}}]),model:{value:e.user.roles,callback:function(t){e.$set(e.user,"roles",t)},expression:"user.roles"}})],1),a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-select",{attrs:{dense:"",outlined:"",label:"Trạng thái","item-text":"name","item-value":"id",items:[{id:0,name:"Chưa kích hoạt"},{id:1,name:"Hoạt động"},{id:2,name:"Tạm khóa"}],"return-object":!1},model:{value:e.user.status,callback:function(t){e.$set(e.user,"status",t)},expression:"user.status"}})],1)],1)],1),a("v-divider"),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{elevation:"0",shaped:"",color:"warning"},on:{click:e.fnReset}},[a("v-icon",[e._v("mdi-reload")]),e._v(" Làm lại ")],1),a("v-btn",{attrs:{elevation:"0",shaped:"",color:"error"},on:{click:e.fnSubmit}},[a("v-icon",[e._v("mdi-content-save")]),e._v(" Lưu lại ")],1)],1)],1)],1)],1)],1)],1)},i=[],o=a(2954),l=a(5486),n=a(5871),r=a(1548),d=a(2013),u=a(3578),c={components:{LayoutDefault:u.Z,VSelectValidation:r.Z,VTextValidation:l.Z,ValidationObserver:o._j,IBreadcrumb:d.Z},data(){return{breadcrumbs:[{text:"Dashboard",disabled:!1,href:"Dashboard"},{text:"Quản lý tài khoản",disabled:!1,href:"/auth/users"},{text:"Thêm mới",disabled:!1,href:""}],loading:!1,isLoading:!1,showPwd:!1,user:n.$.baseJson(),organizations:[],roles:[]}},created(){this.fnGetOrg(),this.fnGetRoles(),this.fnGetDetail()},methods:{async fnGetOrg(){await this.$axios.get("auth/don-vi/select").then((e=>{this.organizations=e.data.data.map((e=>({id:e.id,name:e.tenDonVi})))})).catch()},async fnGetRoles(){await this.axios.get("auth/roles/all").then((e=>{this.roles=e.data.data.map((e=>({id:e.id,name:e.name})))})).catch()},async fnGetDetail(){await this.axios.get("auth/users/edit/"+this.$route.params.id).then((e=>{this.user=n.$.fromJson(e.data.data)}))},async fnSubmit(){this.loading=!0;const e=await this.$refs.observer.validate();if(!e)return this.loading=!1,!1;this.axios.post("auth/users/edit/"+this.$route.params.id,n.$.toJson(this.user)).then((e=>{this.$store.dispatch("SnackbarStore/showSnackBar",e.data),this.fnReset()})).catch().finally((()=>{this.loading=!1}))},async fnReset(){await this.fnGetDetail()}}},m=c,h=a(1001),v=a(3453),b=a.n(v),f=a(1835),p=a(680),x=a(2371),V=a(7118),w=a(5424),k=a(2102),g=a(1418),_=a(6428),$=a(2877),Z=a(3986),y=a(6656),T=a(7921),S=(0,h.Z)(m,s,i,!1,null,null,null),C=S.exports;b()(S,{VAutocomplete:f.Z,VBtn:p.Z,VCard:x.Z,VCardActions:V.h7,VCardText:V.ZB,VChip:w.Z,VCol:k.Z,VDivider:g.Z,VIcon:_.Z,VRow:$.Z,VSelect:Z.Z,VToolbar:y.Z,VToolbarTitle:T.qW})}}]);
//# sourceMappingURL=691.c44a3e62.js.map