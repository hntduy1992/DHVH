"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[625],{291:function(t,a,e){e.d(a,{L:function(){return l}});const n=t=>({id:t.id,tenDanhMuc:t.tenDanhMuc,noiDung:t.noiDung,namApDung:t.namApDung,donViApDung:t.donViApDung,trangThai:t.trangThai}),i=t=>({id:t.id,tenDanhMuc:t.tenDanhMuc,noiDung:t.noiDung,namApDung:t.namApDung,donViApDung:t?.donvi?t.donvi.map((t=>t.maDonVi)):[],trangThai:t.trangThai}),o=()=>({id:null,tenDanhMuc:null,noiDung:null,namApDung:null,donViApDung:[],trangThai:1}),l={toJson:n,fromJson:i,baseJson:o}},525:function(t,a,e){e.r(a),e.d(a,{default:function(){return Z}});var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("LayoutDefault",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("IBreadcrumb",{attrs:{items:t.breadcrumbs}})],1),e("v-col",{attrs:{cols:"12"}},[e("v-card",[e("v-toolbar",{attrs:{dense:"",elevation:"0"}},[e("v-toolbar-title",[t._v("DANH SÁCH")]),e("v-spacer"),e("v-text-field",{staticClass:"mr-2",staticStyle:{"max-width":"210px"},attrs:{label:"Tìm kiếm",placeholder:"Nhập từ khóa","hide-details":"",dense:""},model:{value:t.keySearch,callback:function(a){t.keySearch=a},expression:"keySearch"}}),e("v-tooltip",{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[e("v-btn",t._g({attrs:{icon:"",color:"primary",to:"DanhMuc/ThemMoi"}},n),[e("v-icon",[t._v(" mdi-plus-circle ")])],1)]}}])},[e("span",[t._v("Thêm mới")])]),e("v-tooltip",{attrs:{top:"",color:"red"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[e("span",t._g({},n),[e("v-btn",{staticClass:"mr-1",attrs:{color:"error",icon:"",disabled:0===t.rowSelected.length},on:{click:function(a){return t.fnConfirm(!0)}}},[e("v-icon",[t._v("mdi-delete-circle")])],1)],1)]}}])},[e("span",[t._v("Xóa ")])])],1),e("v-divider"),e("IDataTable",{attrs:{headers:t.headers,items:t.items,total:t.totalRow,loading:t.loading},on:{"datatable::pagination":function(a){t.pagination=a},"datatable::selected":function(a){t.rowSelected=a}},scopedSlots:t._u([{key:"item.created_at",fn:function(a){var n=a.item;return[e("span",[t._v(t._s(new Date(n.created_at).toLocaleDateString("vi-VN")))])]}},{key:"item.action",fn:function(a){var n=a.item;return[e("ContextMenu",{attrs:{items:[{name:"Chỉnh sửa",icon:"mdi-file-document-edit-outline",color:"blue",url:"DanhMuc/"+n.id},{name:"Xóa",icon:"mdi-delete-circle",color:"red",fn:function(){return t.fnConfirm(!1,n)}}]}})]}}],null,!0)})],1),e("v-dialog",{attrs:{scrollable:"","max-width":"400px"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",{attrs:{width:"400"}},[e("v-card-title",[t._v("HỆ THỐNG")]),e("v-divider"),e("v-card-text",{staticClass:"pa-4"},[e("p",{staticStyle:{"font-size":"15px"}},[t._v(" Mọi thông tin liên quan sẽ bị mất theo. Bạn chắc chắn muốn xóa? ")])]),e("v-divider"),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{elevation:"0",color:"warning darken-1"},on:{click:function(a){t.dialog=!1}}},[t._v(" Không ")]),e("v-btn",{attrs:{dark:"",elevation:"0",color:"red"},on:{click:t.fnDelete}},[t._v(" Có ")])],1)],1)],1)],1)],1)],1)},i=[],o=e(291),l=e(3578),r=e(2013),s=e(4472),c=e(993),d={name:"DanhMuc-Index",components:{LayoutDefault:l.Z,IBreadcrumb:r.Z,IDataTable:s.Z,ContextMenu:c.Z},data(){return{breadcrumbs:[{text:"DASHBOARD",disabled:!1,href:"Dashboard"},{text:"BỘ TIÊU CHÍ",disabled:!1,href:"/Auth/KhaoSat/DanhMuc"}],singleSelected:{},rowSelected:[],pagination:null,keySearch:null,headers:[{text:"Danh mục",value:"tenDanhMuc",width:540},{text:"Năm áp dụng",value:"namApDung",width:130},{text:null,value:"action",align:"right",width:70,sortable:!1}],items:[],totalRow:0,loading:!1,dialog:!1}},watch:{pagination(){this.fnGetList()},keySearch(){clearTimeout(this._timerId),this._timerId=setTimeout((()=>{this.fnGetList()}),600)}},methods:{async fnGetList(){this.loading=!0,await this.$axios.get("auth/khao-sat/danh-muc",{params:{page:this.pagination.page,limit:this.pagination.itemsPerPage,sortBy:this.pagination.sortBy[0],sortDesc:this.pagination.sortDesc[0]?1:0,content:this.keySearch}}).then((t=>{this.items=t.data.data.map((t=>o.L.fromJson(t))),this.totalRow=t.data.totalRow})).finally((()=>{this.loading=!1}))},fnConfirm(t,a){this.dialog=!0,t||(this.singleSelected=a,this.rowSelected=[])},async fnDelete(){this.dialog=!1;let t=[];this.rowSelected.length>0?t=this.rowSelected.map((t=>t.id)):t.push(this.singleSelected?.id),await this.$axios.post("auth/khao-sat/danh-muc/xoa-danh-muc",{ids:t}).then((t=>{this.$store.dispatch("SnackbarStore/showSnackBar",t.data),this.fnGetList()})).finally((()=>{this.loading=!1}))}}},u=d,h=e(1001),m=e(3453),g=e.n(m),p=e(680),v=e(2371),f=e(7118),D=e(2102),b=e(4497),S=e(1418),k=e(6428),w=e(2877),x=e(9762),y=e(5978),_=e(6656),T=e(7921),V=e(9330),C=(0,h.Z)(u,n,i,!1,null,null,null),Z=C.exports;g()(C,{VBtn:p.Z,VCard:v.Z,VCardActions:f.h7,VCardText:f.ZB,VCardTitle:f.EB,VCol:D.Z,VDialog:b.Z,VDivider:S.Z,VIcon:k.Z,VRow:w.Z,VSpacer:x.Z,VTextField:y.Z,VToolbar:_.Z,VToolbarTitle:T.qW,VTooltip:V.Z})}}]);
//# sourceMappingURL=625.310fa51b.js.map