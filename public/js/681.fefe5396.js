"use strict";(self["webpackChunkSaDec"]=self["webpackChunkSaDec"]||[]).push([[681],{1673:function(t,e,a){a.d(e,{o:function(){return l}});const i=t=>({id:t.id,tenDonVi:t.tenDonVi,email:t.email,dienThoai:t.dienThoai,parentId:t.parentId??0,trangThai:t.trangThai}),n=t=>({id:t.id,tenDonVi:t.tenDonVi,email:t.email,dienThoai:t.dienThoai,parentId:t.parentId,capTren:t.parent,trangThai:t.trangThai}),o=()=>({id:null,tenDonVi:null,email:null,dienThoai:null,parentId:0,trangThai:1}),l={toJson:i,fromJson:n,baseJson:o}},2012:function(t,e,a){a.r(e),a.d(e,{default:function(){return H}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("LayoutDefault",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("IBreadcrumb",{attrs:{items:t.breadcrumbs}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-toolbar",{attrs:{dense:"",elevation:"0"}},[a("v-toolbar-title",[t._v("DANH SÁCH")]),a("v-spacer"),a("v-text-field",{staticClass:"mr-2",staticStyle:{"max-width":"210px"},attrs:{label:"Tìm kiếm",placeholder:"Nhập từ khóa","hide-details":"",dense:""},model:{value:t.keySearch,callback:function(e){t.keySearch=e},expression:"keySearch"}}),a("v-tooltip",{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{icon:"",color:"primary",to:"DonViHanhChinh/ThemMoi"}},i),[a("v-icon",[t._v(" mdi-plus-circle ")])],1)]}}])},[a("span",[t._v("Thêm mới")])]),a("v-tooltip",{attrs:{top:"",color:"red"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("span",t._g({},i),[a("v-btn",{staticClass:"mr-1",attrs:{color:"error",icon:"",disabled:0===t.rowSelected.length},on:{click:function(e){return t.fnConfirm(!0)}}},[a("v-icon",[t._v("mdi-delete-circle")])],1)],1)]}}])},[a("span",[t._v("Xóa ")])])],1),a("v-divider"),a("IDataTable",{attrs:{headers:t.headers,items:t.items,total:t.totalRow,loading:t.loading},on:{"datatable::pagination":function(e){t.pagination=e},"datatable::selected":function(e){t.rowSelected=e}},scopedSlots:t._u([{key:"item.capTren.tenDonVi",fn:function(e){var i=e.value;return[a("span",null!=i?[t._v(t._s(i))]:[t._v("-")])]}},{key:"item.action",fn:function(e){var i=e.item;return[a("ContextMenu",{attrs:{items:[{name:"Chỉnh sửa",icon:"mdi-file-document-edit-outline",color:"blue",url:"DonViHanhChinh/"+i.id},{name:"Xóa",icon:"mdi-delete-circle",color:"red",fn:function(){return t.fnConfirm(!1,i)}}]}})]}}],null,!0)})],1),a("v-dialog",{attrs:{scrollable:"","max-width":"400px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{width:"400"}},[a("v-card-title",[t._v("HỆ THỐNG")]),a("v-divider"),a("v-card-text",{staticClass:"pa-4"},[a("p",{staticStyle:{"font-size":"15px"}},[t._v(" Mọi thông tin liên quan sẽ bị mất theo. Bạn chắc chắn muốn xóa? ")])]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{elevation:"0",color:"warning darken-1"},on:{click:function(e){t.dialog=!1}}},[t._v(" Không ")]),a("v-btn",{attrs:{dark:"",elevation:"0",color:"red"},on:{click:t.fnDelete}},[t._v(" Có ")])],1)],1)],1)],1)],1)],1)},n=[],o=a(1673),l=a(3578),r=a(2013),s=a(4472),c=a(993),d={name:"DonViHanhChinh-index",metaInfo:{title:"Đơn vị hành chính",titleTemplate:"%s - ĐÁNH GIÁ CHỈ SỐ CẢI CÁCH HÀNH CHÍNH SA ĐÉC",htmlAttrs:{lang:"vi",amp:!0}},components:{LayoutDefault:l.Z,IBreadcrumb:r.Z,IDataTable:s.Z,ContextMenu:c.Z},data(){return{breadcrumbs:[{text:"DASHBOARD",disabled:!1,href:"Dashboard"},{text:"ĐƠN VỊ HÀNH CHÍNH",disabled:!1,href:"/Auth/DonViHanhChinh"}],singleSelected:{},rowSelected:[],pagination:null,keySearch:null,headers:[{text:"Đơn vị",value:"tenDonVi",width:260},{text:"Đơn vị cấp trên",value:"capTren.tenDonVi",width:260,sortable:!1},{text:"Email",value:"email",width:210},{text:"Điện thoại",value:"dienThoai",width:160},{text:null,value:"action",align:"right",width:50,sortable:!1}],items:[],totalRow:0,loading:!1,dialog:!1}},watch:{pagination(){this.fnGetList()},keySearch(){clearTimeout(this._timerId),this._timerId=setTimeout((()=>{this.fnGetList()}),600)}},methods:{async fnGetList(){this.loading=!0,await this.$axios.get("auth/don-vi",{params:{page:this.pagination.page,limit:this.pagination.itemsPerPage,sortBy:this.pagination.sortBy[0],sortDesc:this.pagination.sortDesc[0]?1:0,content:this.keySearch}}).then((t=>{this.items=t.data.data.map((t=>o.o.fromJson(t))),this.totalRow=t.data.totalRow})).finally((()=>{this.loading=!1}))},fnConfirm(t,e){this.dialog=!0,t||(this.singleSelected=e,this.rowSelected=[])},async fnDelete(){this.dialog=!1;let t=[];this.rowSelected.length>0?t=this.rowSelected.map((t=>t.id)):t.push(this.singleSelected?.id),await this.$axios.post("auth/don-vi/xoa-don-vi",{ids:t}).then((t=>{this.$store.dispatch("SnackbarStore/showSnackBar",t.data),this.fnGetList()})).catch()}}},h=d,u=a(1001),v=a(3453),m=a.n(v),p=a(680),f=a(2371),g=a(7118),b=a(2102),S=a(4497),T=a(1418),C=a(6428),D=a(2877),V=a(9762),w=a(5978),x=a(6656),k=a(7921),y=a(9330),_=(0,u.Z)(h,i,n,!1,null,null,null),H=_.exports;m()(_,{VBtn:p.Z,VCard:f.Z,VCardActions:g.h7,VCardText:g.ZB,VCardTitle:g.EB,VCol:b.Z,VDialog:S.Z,VDivider:T.Z,VIcon:C.Z,VRow:D.Z,VSpacer:V.Z,VTextField:w.Z,VToolbar:x.Z,VToolbarTitle:k.qW,VTooltip:y.Z})}}]);
//# sourceMappingURL=681.fefe5396.js.map